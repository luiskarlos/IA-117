(function(){!function($){return $.dragResize={version:"1.0"},$.fn.dragResize=function(options){var default_options,document_width,enable_resize,initRatio,left,right,that;return default_options={resize:function(pageX,pageY){},activeColor:"#AAA",inactiveColor:"#DDD"},that=this,options=$.extend(default_options,options),enable_resize=!1,"undefined"!=typeof options.initRatio&&(initRatio=options.initRatio.split(":"),left=parseInt(initRatio[0]),right=parseInt(initRatio[1]),enable_resize=!0,document_width=$(document).width(),options.resize(left*document_width/100,1),enable_resize=!1),$(this).mousedown(function(e){return enable_resize=!0,!1}),$(window).mouseup(function(e){return enable_resize=!1}),$(this).mouseenter(function(e){return $(that).css("background-color",options.activeColor)}),$(this).mouseleave(function(e){return $(that).css("background-color",options.inactiveColor)}),$(window).mouseout(function(e){return null===e.relatedTarget?enable_resize=!1:void 0}),$(window).mousemove(function(e){return enable_resize===!0?((e.pageY<0||e.pageY>document.height||e.pageX<0||e.pageX>document.width)&&(enable_resize=!1),options.resize(e.pageX,e.pageY)):void 0})}}($)}).call(this),/**
 * Intro.js v1.1.1
 * https://github.com/usablica/intro.js
 * MIT licensed
 *
 * Copyright (C) 2013 usabli.ca - A weekend project by Afshin Mehrabani (@afshinmeh)
 */
function(root,factory){"object"==typeof exports?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(root)}(this,function(exports){function IntroJs(obj){this._targetElement=obj,this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:.8,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1}}function _introForElement(targetElm){var introItems=[],self=this;if(this._options.steps)for(var i=0,stepsLength=this._options.steps.length;stepsLength>i;i++){var currentItem=_cloneObject(this._options.steps[i]);if(currentItem.step=introItems.length+1,"string"==typeof currentItem.element&&(currentItem.element=document.querySelector(currentItem.element)),"undefined"==typeof currentItem.element||null==currentItem.element){var floatingElementQuery=document.querySelector(".introjsFloatingElement");null==floatingElementQuery&&(floatingElementQuery=document.createElement("div"),floatingElementQuery.className="introjsFloatingElement",document.body.appendChild(floatingElementQuery)),currentItem.element=floatingElementQuery,currentItem.position="floating"}null!=currentItem.element&&introItems.push(currentItem)}else{var allIntroSteps=targetElm.querySelectorAll("*[data-intro]");if(allIntroSteps.length<1)return!1;for(var i=0,elmsLength=allIntroSteps.length;elmsLength>i;i++){var currentElement=allIntroSteps[i],step=parseInt(currentElement.getAttribute("data-step"),10);step>0&&(introItems[step-1]={element:currentElement,intro:currentElement.getAttribute("data-intro"),step:parseInt(currentElement.getAttribute("data-step"),10),tooltipClass:currentElement.getAttribute("data-tooltipClass"),highlightClass:currentElement.getAttribute("data-highlightClass"),position:currentElement.getAttribute("data-position")||this._options.tooltipPosition})}for(var nextStep=0,i=0,elmsLength=allIntroSteps.length;elmsLength>i;i++){var currentElement=allIntroSteps[i];if(null==currentElement.getAttribute("data-step")){for(;;){if("undefined"==typeof introItems[nextStep])break;nextStep++}introItems[nextStep]={element:currentElement,intro:currentElement.getAttribute("data-intro"),step:nextStep+1,tooltipClass:currentElement.getAttribute("data-tooltipClass"),highlightClass:currentElement.getAttribute("data-highlightClass"),position:currentElement.getAttribute("data-position")||this._options.tooltipPosition}}}}for(var tempIntroItems=[],z=0;z<introItems.length;z++)introItems[z]&&tempIntroItems.push(introItems[z]);if(introItems=tempIntroItems,introItems.sort(function(a,b){return a.step-b.step}),self._introItems=introItems,_addOverlayLayer.call(self,targetElm)){_nextStep.call(self);targetElm.querySelector(".introjs-skipbutton"),targetElm.querySelector(".introjs-nextbutton");self._onKeyDown=function(e){if(27===e.keyCode&&1==self._options.exitOnEsc)void 0!=self._introExitCallback&&self._introExitCallback.call(self),_exitIntro.call(self,targetElm);else if(37===e.keyCode)_previousStep.call(self);else if(39===e.keyCode)_nextStep.call(self);else if(13===e.keyCode){var target=e.target||e.srcElement;target&&target.className.indexOf("introjs-prevbutton")>0?_previousStep.call(self):target&&target.className.indexOf("introjs-skipbutton")>0?(self._introItems.length-1==self._currentStep&&"function"==typeof self._introCompleteCallback&&self._introCompleteCallback.call(self),void 0!=self._introExitCallback&&self._introExitCallback.call(self),_exitIntro.call(self,targetElm)):_nextStep.call(self),e.preventDefault?e.preventDefault():e.returnValue=!1}},self._onResize=function(e){_setHelperLayerPosition.call(self,document.querySelector(".introjs-helperLayer")),_setHelperLayerPosition.call(self,document.querySelector(".introjs-tooltipReferenceLayer"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",self._onKeyDown,!0),window.addEventListener("resize",self._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",self._onKeyDown),document.attachEvent("onresize",self._onResize))}return!1}function _cloneObject(object){if(null==object||"object"!=typeof object||"undefined"!=typeof object.nodeType)return object;var temp={};for(var key in object)"undefined"!=typeof jQuery&&object[key]instanceof jQuery?temp[key]=object[key]:temp[key]=_cloneObject(object[key]);return temp}function _goToStep(step){this._currentStep=step-2,"undefined"!=typeof this._introItems&&_nextStep.call(this)}function _nextStep(){if(this._direction="forward","undefined"==typeof this._currentStep?this._currentStep=0:++this._currentStep,this._introItems.length<=this._currentStep)return"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),void _exitIntro.call(this,this._targetElement);var nextStep=this._introItems[this._currentStep];"undefined"!=typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,nextStep.element),_showElement.call(this,nextStep)}function _previousStep(){if(this._direction="backward",0===this._currentStep)return!1;var nextStep=this._introItems[--this._currentStep];"undefined"!=typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,nextStep.element),_showElement.call(this,nextStep)}function _exitIntro(targetElement){var overlayLayer=targetElement.querySelector(".introjs-overlay");if(null!=overlayLayer){overlayLayer.style.opacity=0,setTimeout(function(){overlayLayer.parentNode&&overlayLayer.parentNode.removeChild(overlayLayer)},500);var helperLayer=targetElement.querySelector(".introjs-helperLayer");helperLayer&&helperLayer.parentNode.removeChild(helperLayer);var referenceLayer=targetElement.querySelector(".introjs-tooltipReferenceLayer");referenceLayer&&referenceLayer.parentNode.removeChild(referenceLayer);var disableInteractionLayer=targetElement.querySelector(".introjs-disableInteraction");disableInteractionLayer&&disableInteractionLayer.parentNode.removeChild(disableInteractionLayer);var floatingElement=document.querySelector(".introjsFloatingElement");floatingElement&&floatingElement.parentNode.removeChild(floatingElement);var showElement=document.querySelector(".introjs-showElement");showElement&&(showElement.className=showElement.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""));var fixParents=document.querySelectorAll(".introjs-fixParent");if(fixParents&&fixParents.length>0)for(var i=fixParents.length-1;i>=0;i--)fixParents[i].className=fixParents[i].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this._currentStep=void 0}}function _placeTooltip(targetElement,tooltipLayer,arrowLayer,helperNumberLayer){var currentStepObj,tooltipOffset,targetOffset,windowSize,currentTooltipPosition,tooltipCssClass="";if(tooltipLayer.style.top=null,tooltipLayer.style.right=null,tooltipLayer.style.bottom=null,tooltipLayer.style.left=null,tooltipLayer.style.marginLeft=null,tooltipLayer.style.marginTop=null,arrowLayer.style.display="inherit","undefined"!=typeof helperNumberLayer&&null!=helperNumberLayer&&(helperNumberLayer.style.top=null,helperNumberLayer.style.left=null),this._introItems[this._currentStep])switch(currentStepObj=this._introItems[this._currentStep],tooltipCssClass="string"==typeof currentStepObj.tooltipClass?currentStepObj.tooltipClass:this._options.tooltipClass,tooltipLayer.className=("introjs-tooltip "+tooltipCssClass).replace(/^\s+|\s+$/g,""),currentTooltipPosition=this._introItems[this._currentStep].position,("auto"==currentTooltipPosition||"auto"==this._options.tooltipPosition)&&"floating"!=currentTooltipPosition&&(currentTooltipPosition=_determineAutoPosition.call(this,targetElement,tooltipLayer,currentTooltipPosition)),targetOffset=_getOffset(targetElement),tooltipOffset=_getOffset(tooltipLayer),windowSize=_getWinSize(),currentTooltipPosition){case"top":arrowLayer.className="introjs-arrow bottom";var tooltipLayerStyleLeft=15;_checkRight(targetOffset,tooltipLayerStyleLeft,tooltipOffset,windowSize,tooltipLayer),tooltipLayer.style.bottom=targetOffset.height+20+"px";break;case"right":tooltipLayer.style.left=targetOffset.width+20+"px",targetOffset.top+tooltipOffset.height>windowSize.height?(arrowLayer.className="introjs-arrow left-bottom",tooltipLayer.style.top="-"+(tooltipOffset.height-targetOffset.height-20)+"px"):arrowLayer.className="introjs-arrow left";break;case"left":1==this._options.showStepNumbers&&(tooltipLayer.style.top="15px"),targetOffset.top+tooltipOffset.height>windowSize.height?(tooltipLayer.style.top="-"+(tooltipOffset.height-targetOffset.height-20)+"px",arrowLayer.className="introjs-arrow right-bottom"):arrowLayer.className="introjs-arrow right",tooltipLayer.style.right=targetOffset.width+20+"px";break;case"floating":arrowLayer.style.display="none",tooltipLayer.style.left="50%",tooltipLayer.style.top="50%",tooltipLayer.style.marginLeft="-"+tooltipOffset.width/2+"px",tooltipLayer.style.marginTop="-"+tooltipOffset.height/2+"px","undefined"!=typeof helperNumberLayer&&null!=helperNumberLayer&&(helperNumberLayer.style.left="-"+(tooltipOffset.width/2+18)+"px",helperNumberLayer.style.top="-"+(tooltipOffset.height/2+18)+"px");break;case"bottom-right-aligned":arrowLayer.className="introjs-arrow top-right";var tooltipLayerStyleRight=0;_checkLeft(targetOffset,tooltipLayerStyleRight,tooltipOffset,tooltipLayer),tooltipLayer.style.top=targetOffset.height+20+"px";break;case"bottom-middle-aligned":arrowLayer.className="introjs-arrow top-middle";var tooltipLayerStyleLeftRight=targetOffset.width/2-tooltipOffset.width/2;_checkLeft(targetOffset,tooltipLayerStyleLeftRight,tooltipOffset,tooltipLayer)&&(tooltipLayer.style.right=null,_checkRight(targetOffset,tooltipLayerStyleLeftRight,tooltipOffset,windowSize,tooltipLayer)),tooltipLayer.style.top=targetOffset.height+20+"px";break;case"bottom-left-aligned":case"bottom":default:arrowLayer.className="introjs-arrow top";var tooltipLayerStyleLeft=0;_checkRight(targetOffset,tooltipLayerStyleLeft,tooltipOffset,windowSize,tooltipLayer),tooltipLayer.style.top=targetOffset.height+20+"px"}}function _checkRight(targetOffset,tooltipLayerStyleLeft,tooltipOffset,windowSize,tooltipLayer){return targetOffset.left+tooltipLayerStyleLeft+tooltipOffset.width>windowSize.width?(tooltipLayer.style.left=windowSize.width-tooltipOffset.width-targetOffset.left+"px",!1):(tooltipLayer.style.left=tooltipLayerStyleLeft+"px",!0)}function _checkLeft(targetOffset,tooltipLayerStyleRight,tooltipOffset,tooltipLayer){return targetOffset.left+targetOffset.width-tooltipLayerStyleRight-tooltipOffset.width<0?(tooltipLayer.style.left=-targetOffset.left+"px",!1):(tooltipLayer.style.right=tooltipLayerStyleRight+"px",!0)}function _determineAutoPosition(targetElement,tooltipLayer,desiredTooltipPosition){var possiblePositions=this._options.positionPrecedence.slice(),windowSize=_getWinSize(),tooltipHeight=_getOffset(tooltipLayer).height+10,tooltipWidth=_getOffset(tooltipLayer).width+20,targetOffset=_getOffset(targetElement),calculatedPosition="floating";return targetOffset.left+tooltipWidth>windowSize.width||targetOffset.left+targetOffset.width/2-tooltipWidth<0?(_removeEntry(possiblePositions,"bottom"),_removeEntry(possiblePositions,"top")):(targetOffset.height+targetOffset.top+tooltipHeight>windowSize.height&&_removeEntry(possiblePositions,"bottom"),targetOffset.top-tooltipHeight<0&&_removeEntry(possiblePositions,"top")),targetOffset.width+targetOffset.left+tooltipWidth>windowSize.width&&_removeEntry(possiblePositions,"right"),targetOffset.left-tooltipWidth<0&&_removeEntry(possiblePositions,"left"),possiblePositions.length>0&&(calculatedPosition=possiblePositions[0]),desiredTooltipPosition&&"auto"!=desiredTooltipPosition&&possiblePositions.indexOf(desiredTooltipPosition)>-1&&(calculatedPosition=desiredTooltipPosition),calculatedPosition}function _removeEntry(stringArray,stringToRemove){stringArray.indexOf(stringToRemove)>-1&&stringArray.splice(stringArray.indexOf(stringToRemove),1)}function _setHelperLayerPosition(helperLayer){if(helperLayer){if(!this._introItems[this._currentStep])return;var currentElement=this._introItems[this._currentStep],elementPosition=_getOffset(currentElement.element),widthHeightPadding=10;"floating"==currentElement.position&&(widthHeightPadding=0),helperLayer.setAttribute("style","width: "+(elementPosition.width+widthHeightPadding)+"px; height:"+(elementPosition.height+widthHeightPadding)+"px; top:"+(elementPosition.top-5)+"px;left: "+(elementPosition.left-5)+"px;")}}function _disableInteraction(){var disableInteractionLayer=document.querySelector(".introjs-disableInteraction");null===disableInteractionLayer&&(disableInteractionLayer=document.createElement("div"),disableInteractionLayer.className="introjs-disableInteraction",this._targetElement.appendChild(disableInteractionLayer)),_setHelperLayerPosition.call(this,disableInteractionLayer)}function _showElement(targetElement){"undefined"!=typeof this._introChangeCallback&&this._introChangeCallback.call(this,targetElement.element);var self=this,oldHelperLayer=document.querySelector(".introjs-helperLayer"),oldReferenceLayer=document.querySelector(".introjs-tooltipReferenceLayer"),highlightClass="introjs-helperLayer";_getOffset(targetElement.element);if("string"==typeof targetElement.highlightClass&&(highlightClass+=" "+targetElement.highlightClass),"string"==typeof this._options.highlightClass&&(highlightClass+=" "+this._options.highlightClass),null!=oldHelperLayer){var oldHelperNumberLayer=oldReferenceLayer.querySelector(".introjs-helperNumberLayer"),oldtooltipLayer=oldReferenceLayer.querySelector(".introjs-tooltiptext"),oldArrowLayer=oldReferenceLayer.querySelector(".introjs-arrow"),oldtooltipContainer=oldReferenceLayer.querySelector(".introjs-tooltip"),skipTooltipButton=oldReferenceLayer.querySelector(".introjs-skipbutton"),prevTooltipButton=oldReferenceLayer.querySelector(".introjs-prevbutton"),nextTooltipButton=oldReferenceLayer.querySelector(".introjs-nextbutton");if(oldHelperLayer.className=highlightClass,oldtooltipContainer.style.opacity=0,oldtooltipContainer.style.display="none",null!=oldHelperNumberLayer){var lastIntroItem=this._introItems[targetElement.step-2>=0?targetElement.step-2:0];(null!=lastIntroItem&&"forward"==this._direction&&"floating"==lastIntroItem.position||"backward"==this._direction&&"floating"==targetElement.position)&&(oldHelperNumberLayer.style.opacity=0)}_setHelperLayerPosition.call(self,oldHelperLayer),_setHelperLayerPosition.call(self,oldReferenceLayer);var fixParents=document.querySelectorAll(".introjs-fixParent");if(fixParents&&fixParents.length>0)for(var i=fixParents.length-1;i>=0;i--)fixParents[i].className=fixParents[i].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");var oldShowElement=document.querySelector(".introjs-showElement");oldShowElement.className=oldShowElement.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""),self._lastShowElementTimer&&clearTimeout(self._lastShowElementTimer),self._lastShowElementTimer=setTimeout(function(){null!=oldHelperNumberLayer&&(oldHelperNumberLayer.innerHTML=targetElement.step),oldtooltipLayer.innerHTML=targetElement.intro,oldtooltipContainer.style.display="block",_placeTooltip.call(self,targetElement.element,oldtooltipContainer,oldArrowLayer,oldHelperNumberLayer),oldReferenceLayer.querySelector(".introjs-bullets li > a.active").className="",oldReferenceLayer.querySelector('.introjs-bullets li > a[data-stepnumber="'+targetElement.step+'"]').className="active",oldReferenceLayer.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+_getProgress.call(self)+"%;"),oldtooltipContainer.style.opacity=1,oldHelperNumberLayer&&(oldHelperNumberLayer.style.opacity=1),-1===nextTooltipButton.tabIndex?skipTooltipButton.focus():nextTooltipButton.focus()},350)}else{var helperLayer=document.createElement("div"),referenceLayer=document.createElement("div"),arrowLayer=document.createElement("div"),tooltipLayer=document.createElement("div"),tooltipTextLayer=document.createElement("div"),bulletsLayer=document.createElement("div"),progressLayer=document.createElement("div"),buttonsLayer=document.createElement("div");helperLayer.className=highlightClass,referenceLayer.className="introjs-tooltipReferenceLayer",_setHelperLayerPosition.call(self,helperLayer),_setHelperLayerPosition.call(self,referenceLayer),this._targetElement.appendChild(helperLayer),this._targetElement.appendChild(referenceLayer),arrowLayer.className="introjs-arrow",tooltipTextLayer.className="introjs-tooltiptext",tooltipTextLayer.innerHTML=targetElement.intro,bulletsLayer.className="introjs-bullets",this._options.showBullets===!1&&(bulletsLayer.style.display="none");for(var ulContainer=document.createElement("ul"),i=0,stepsLength=this._introItems.length;stepsLength>i;i++){var innerLi=document.createElement("li"),anchorLink=document.createElement("a");anchorLink.onclick=function(){self.goToStep(this.getAttribute("data-stepnumber"))},i===targetElement.step-1&&(anchorLink.className="active"),anchorLink.href="javascript:void(0);",anchorLink.innerHTML="&nbsp;",anchorLink.setAttribute("data-stepnumber",this._introItems[i].step),innerLi.appendChild(anchorLink),ulContainer.appendChild(innerLi)}bulletsLayer.appendChild(ulContainer),progressLayer.className="introjs-progress",this._options.showProgress===!1&&(progressLayer.style.display="none");var progressBar=document.createElement("div");if(progressBar.className="introjs-progressbar",progressBar.setAttribute("style","width:"+_getProgress.call(this)+"%;"),progressLayer.appendChild(progressBar),buttonsLayer.className="introjs-tooltipbuttons",this._options.showButtons===!1&&(buttonsLayer.style.display="none"),tooltipLayer.className="introjs-tooltip",tooltipLayer.appendChild(tooltipTextLayer),tooltipLayer.appendChild(bulletsLayer),tooltipLayer.appendChild(progressLayer),1==this._options.showStepNumbers){var helperNumberLayer=document.createElement("span");helperNumberLayer.className="introjs-helperNumberLayer",helperNumberLayer.innerHTML=targetElement.step,referenceLayer.appendChild(helperNumberLayer)}tooltipLayer.appendChild(arrowLayer),referenceLayer.appendChild(tooltipLayer);var nextTooltipButton=document.createElement("a");nextTooltipButton.onclick=function(){self._introItems.length-1!=self._currentStep&&_nextStep.call(self)},nextTooltipButton.href="javascript:void(0);",nextTooltipButton.innerHTML=this._options.nextLabel;var prevTooltipButton=document.createElement("a");prevTooltipButton.onclick=function(){0!=self._currentStep&&_previousStep.call(self)},prevTooltipButton.href="javascript:void(0);",prevTooltipButton.innerHTML=this._options.prevLabel;var skipTooltipButton=document.createElement("a");skipTooltipButton.className="introjs-button introjs-skipbutton",skipTooltipButton.href="javascript:void(0);",skipTooltipButton.innerHTML=this._options.skipLabel,skipTooltipButton.onclick=function(){self._introItems.length-1==self._currentStep&&"function"==typeof self._introCompleteCallback&&self._introCompleteCallback.call(self),self._introItems.length-1!=self._currentStep&&"function"==typeof self._introExitCallback&&self._introExitCallback.call(self),_exitIntro.call(self,self._targetElement)},buttonsLayer.appendChild(skipTooltipButton),this._introItems.length>1&&(buttonsLayer.appendChild(prevTooltipButton),buttonsLayer.appendChild(nextTooltipButton)),tooltipLayer.appendChild(buttonsLayer),_placeTooltip.call(self,targetElement.element,tooltipLayer,arrowLayer,helperNumberLayer)}this._options.disableInteraction===!0&&_disableInteraction.call(self),prevTooltipButton.removeAttribute("tabIndex"),nextTooltipButton.removeAttribute("tabIndex"),0==this._currentStep&&this._introItems.length>1?(prevTooltipButton.className="introjs-button introjs-prevbutton introjs-disabled",prevTooltipButton.tabIndex="-1",nextTooltipButton.className="introjs-button introjs-nextbutton",skipTooltipButton.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||1==this._introItems.length?(skipTooltipButton.innerHTML=this._options.doneLabel,prevTooltipButton.className="introjs-button introjs-prevbutton",nextTooltipButton.className="introjs-button introjs-nextbutton introjs-disabled",nextTooltipButton.tabIndex="-1"):(prevTooltipButton.className="introjs-button introjs-prevbutton",nextTooltipButton.className="introjs-button introjs-nextbutton",skipTooltipButton.innerHTML=this._options.skipLabel),nextTooltipButton.focus(),targetElement.element.className+=" introjs-showElement";var currentElementPosition=_getPropValue(targetElement.element,"position");"absolute"!==currentElementPosition&&"relative"!==currentElementPosition&&(targetElement.element.className+=" introjs-relativePosition");for(var parentElm=targetElement.element.parentNode;null!=parentElm&&"body"!==parentElm.tagName.toLowerCase();){var zIndex=_getPropValue(parentElm,"z-index"),opacity=parseFloat(_getPropValue(parentElm,"opacity")),transform=_getPropValue(parentElm,"transform")||_getPropValue(parentElm,"-webkit-transform")||_getPropValue(parentElm,"-moz-transform")||_getPropValue(parentElm,"-ms-transform")||_getPropValue(parentElm,"-o-transform");(/[0-9]+/.test(zIndex)||1>opacity||"none"!==transform&&void 0!==transform)&&(parentElm.className+=" introjs-fixParent"),parentElm=parentElm.parentNode}if(!_elementInViewport(targetElement.element)&&this._options.scrollToElement===!0){var rect=targetElement.element.getBoundingClientRect(),winHeight=_getWinSize().height,top=rect.bottom-(rect.bottom-rect.top),bottom=rect.bottom-winHeight;0>top||targetElement.element.clientHeight>winHeight?window.scrollBy(0,top-30):window.scrollBy(0,bottom+100)}"undefined"!=typeof this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,targetElement.element)}function _getPropValue(element,propName){var propValue="";return element.currentStyle?propValue=element.currentStyle[propName]:document.defaultView&&document.defaultView.getComputedStyle&&(propValue=document.defaultView.getComputedStyle(element,null).getPropertyValue(propName)),propValue&&propValue.toLowerCase?propValue.toLowerCase():propValue}function _getWinSize(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var D=document.documentElement;return{width:D.clientWidth,height:D.clientHeight}}function _elementInViewport(el){var rect=el.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom+80<=window.innerHeight&&rect.right<=window.innerWidth}function _addOverlayLayer(targetElm){var overlayLayer=document.createElement("div"),styleText="",self=this;if(overlayLayer.className="introjs-overlay","body"===targetElm.tagName.toLowerCase())styleText+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",overlayLayer.setAttribute("style",styleText);else{var elementPosition=_getOffset(targetElm);elementPosition&&(styleText+="width: "+elementPosition.width+"px; height:"+elementPosition.height+"px; top:"+elementPosition.top+"px;left: "+elementPosition.left+"px;",overlayLayer.setAttribute("style",styleText))}return targetElm.appendChild(overlayLayer),overlayLayer.onclick=function(){1==self._options.exitOnOverlayClick&&(void 0!=self._introExitCallback&&self._introExitCallback.call(self),_exitIntro.call(self,targetElm))},setTimeout(function(){styleText+="opacity: "+self._options.overlayOpacity.toString()+";",overlayLayer.setAttribute("style",styleText)},10),!0}function _getOffset(element){var elementPosition={};elementPosition.width=element.offsetWidth,elementPosition.height=element.offsetHeight;for(var _x=0,_y=0;element&&!isNaN(element.offsetLeft)&&!isNaN(element.offsetTop);)_x+=element.offsetLeft,_y+=element.offsetTop,element=element.offsetParent;return elementPosition.top=_y,elementPosition.left=_x,elementPosition}function _getProgress(){var currentStep=parseInt(this._currentStep+1,10);return currentStep/this._introItems.length*100}function _mergeOptions(obj1,obj2){var obj3={};for(var attrname in obj1)obj3[attrname]=obj1[attrname];for(var attrname in obj2)obj3[attrname]=obj2[attrname];return obj3}var VERSION="1.1.1",introJs=function(targetElm){if("object"==typeof targetElm)return new IntroJs(targetElm);if("string"==typeof targetElm){var targetElement=document.querySelector(targetElm);if(targetElement)return new IntroJs(targetElement);throw new Error("There is no element with given selector.")}return new IntroJs(document.body)};return introJs.version=VERSION,introJs.fn=IntroJs.prototype={clone:function(){return new IntroJs(this)},setOption:function(option,value){return this._options[option]=value,this},setOptions:function(options){return this._options=_mergeOptions(this._options,options),this},start:function(){return _introForElement.call(this,this._targetElement),this},goToStep:function(step){return _goToStep.call(this,step),this},nextStep:function(){return _nextStep.call(this),this},previousStep:function(){return _previousStep.call(this),this},exit:function(){return _exitIntro.call(this,this._targetElement),this},refresh:function(){return _setHelperLayerPosition.call(this,document.querySelector(".introjs-helperLayer")),_setHelperLayerPosition.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),this},onbeforechange:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=providedCallback,this},onchange:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=providedCallback,this},onafterchange:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=providedCallback,this},oncomplete:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=providedCallback,this},onexit:function(providedCallback){if("function"!=typeof providedCallback)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=providedCallback,this}},exports.introJs=introJs,introJs}),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeView,HR,ref;return ChallengeView=function(superClass){function ChallengeView(){return ChallengeView.__super__.constructor.apply(this,arguments)}return extend(ChallengeView,superClass),ChallengeView.prototype.template="challenge",ChallengeView.prototype.className="challenge-view",ChallengeView.prototype.eager_load_asset_list=["compound/forum-views","compound/submission-views"],ChallengeView.prototype.events={"click a.hr-problem-link":"clickProblem","click a.hr-submissions-link":"clickSubmissions","click a.hr-leaderboard-link":"clickLeaderboard","click a.hr-forum-link":"clickForum","click a.hr-editorial-link":"clickEditorial","click a.hr-custom-link":"clickCustomLink","click a.hr-topics-link":"clickTopics","click a.hr-expert-solution-link":"clickExpertSolution","change #showPractice":"toggleLeaderboard","click .pagination a":"changePagination","click .js-bookmark":"bookmarkChallenge"},ChallengeView.prototype.initialize=function(options){return this.submission_id=options.submission_id,this.contest=options.contest,this.activeTab=options.activeTab,this.paramPage=options.paramPage,this.customView=options.customView,this.submissionId=options.submissionId,this.submissionOptions=options.submissionOptions,this.includePractice=!0,this.leaderboardFilter=options.leaderboardFilter,this.companyName=options.companyName,this.companySlug=options.companySlug,this.companyFollowing=options.companyFollowing,this.companyId=options.companyId,this.iscompanyModerator=options.isCompanyModerator,this.profile=HR.profile(),this.profile.fetchScores(),this.topic_slug=options.topic_slug,this.fav_busy=!1,this.contestText=-1!==HR.ABTest.get_variant("test-competitions").indexOf("treatment")?"Competitions":"Contests",HR.ABTest.activate("articles-reverse"),this.show_bookmarks="master"===this.model.get("contest_slug")&&HR.profile().isLoggedIn(),this.contest||(this.contest=new HR.model("contest"),this.contest.set("slug",this.model.get("contest_slug"))),this.listenTo(this.model,"change",this.render),this.listenTo(this.contest,"reset",this.render),this.listenTo(this.profile,"reset",this.startTourCompanyChallenge),this.listenTo(this.profile,"reset",this.renderScore),this.contest.cached()},ChallengeView.prototype.setTab=function(tab){return this.$("ul.nav-tabs li").removeClass("active"),this.$(tab).addClass("active")},ChallengeView.prototype.setProblem=function(){var contest_slug;return HR.appController.setTitle(this.title_leading+this.title_ending),contest_slug=this.model.get("contest_slug"),this.activeTab="problem",this.setTab("#"+this.activeTab+"Tab"),this.challengeTemplateView||(this.challengeTemplateView=new HR.ChallengeTemplateView({model:this.model,contest:this.contest,submission_id:this.submission_id,parent:this,companySlug:this.companySlug,companyName:this.companyName,companyId:this.companyId,companyFollowing:this.companyFollowing,challengeModel:this.model}),this.add_subview(this.challengeTemplateView)),this.showView("problem",this.challengeTemplateView),null===contest_slug&&(contest_slug="master"),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,page_type:"challengepage",challenge:this.model.get("slug")}},ChallengeView.prototype.clickProblem=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=""+this.model.pageURL()?(HR.router.navigate(this.model.pageURL(),!1),this.setProblem()):void 0},ChallengeView.prototype.setBreadcrumb=function(){if(this.contest&&this.contest.sync_status&&this.model.sync_status){if("previewdummycontest"===this.contest.get("slug"))return;return this.contest.get("company_associated_contest")?(HR.appView.setBreadcrumb("global",this.companyName,"/companies/"+this.companySlug),HR.appView.setBreadcrumb("challenge",this.model.get("name"),"/companies/"+this.companySlug+"/challenges/"+this.model.get("slug")),this.startTourCompanyChallenge()):("master"===this.contest.get("slug")?HR.appView.setBreadcrumb("global","Dashboard","/dashboard"):(HR.appView.setBreadcrumb("global","All "+this.contestText,"/contests"),HR.appView.setBreadcrumb("contest",this.contest.get("name"),"/contests/"+this.contest.get("slug")+"/challenges"),HR.appView.setBreadcrumb("challenge",this.model.get("name"),"/contests/"+this.contest.get("slug")+"/challenges/"+this.model.get("slug"))),this.model.get("track")&&(HR.appView.setBreadcrumb("contest-track",this.model.get("track").track_name,"/domains/"+this.model.get("track").track_slug),HR.appView.setBreadcrumb("contest-chapter",this.model.get("track").name,"/domains/"+this.model.get("track").track_slug+"/"+this.model.get("track").slug),HR.appView.setBreadcrumb("challenge",this.model.get("name"),"/challenges/"+this.model.get("slug")))),this.renderScore(this.contest,this.challenge)}},ChallengeView.prototype.startTourCompanyChallenge=function(){var tourDone;if(this.profile.isLoggedIn()&&"true"!==$.cookie("feed_onboarding_ongoing_"+this.profile.id)&&this.contest&&this.contest.sync_status&&this.model.sync_status&&this.contest.get("company_associated_contest"))return tourDone=this.profile.get("company_challenge_breadcrumb_tour_done"),tourDone||this.introjs?void 0:(this.introjs=introJs(),this.introjs.setOptions({showStepNumbers:!1,showBullets:!1,showButtons:!1}),setTimeout(function(_this){return function(){var that;return _this.introjs.start(),that=_this,$(".introjs-tooltipReferenceLayer").click(function(e){return e.stopPropagation(),that.introjs.exit()})}}(this),1e3),this.profile.set("company_challenge_breadcrumb_tour_done",!0),this.profile.save())},ChallengeView.prototype.setSubmissions=function(page){var challenge_slug,contest_slug;return null==page&&(page=1),HR.appController.setTitle(this.title_leading+" Submissions"+this.title_ending),this.activeTab="submissions",this.setTab("#"+this.activeTab+"Tab"),this.showLoading("submissions"),challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),
this.submissions||(this.submissions=HR.collection("submissions")),this.submissions.setPage(page),this.submissions.setContest(contest_slug),this.submissions.setChallenge(challenge_slug),this.submissions.cached(),HR.requires(["compound/submission-views"],function(_this){return function(){return _this.submissionsView||(_this.submissionsView=new HR.SubmissionsView({collection:_this.submissions}),_this.add_subview(_this.submissionsView)),_this.showView("submissions",_this.submissionsView),null===contest_slug&&(contest_slug="master"),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,page_type:"submissions",challenge:challenge_slug}}}(this))},ChallengeView.prototype.clickSubmissions=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=this.model.pageURL()+"/submissions"?(HR.router.navigate(this.model.pageURL()+"/submissions",!1),this.setSubmissions()):void 0},ChallengeView.prototype.setSubmission=function(submissionId){var challenge_slug,contest_slug,page;return HR.appController.setTitle(this.title_leading+(" Submission #"+submissionId)+this.title_ending),this.activeTab="submissions",this.setTab("#"+this.activeTab+"Tab"),this.showLoading("submissions"),challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),this.contest||(this.contest=HR.model("contest")),this.contest.set("slug",this.model.get("contest_slug")),this.contest.cached(),this.submissionOptions.element&&"page"!==this.submissionOptions.element?void 0:(page="page"===this.submissionOptions.element?this.submissionOptions.element_id:1,null===this.submissionOptions._filter&&(this.submissionOptions._filter="all"),this.submission_model||(this.submission_model=HR.model("submission",{id:submissionId,filter:this.submissionOptions._filter,contest_slug:this.model.get("contest_slug")})),this.submission_model.cached(),HR.requires(["compound/submission-views"],function(_this){return function(){var gameset_collection;return _this.submissionView||(_this.submissionView=new HR.SubmissionView({contest:_this.contest,model:_this.submission_model,challenge:_this.model}),"game"===_this.submissionOptions.kind&&(gameset_collection=HR.collection("game-set"),gameset_collection.setPage(page),gameset_collection.setFilter(_this.submissionOptions._filter),gameset_collection.setSid(submissionId),gameset_collection.cached(),_this.submissionView.setGameSetCollection(gameset_collection)),_this.add_subview(_this.submissionView)),_this.showView("submissions",_this.submissionView)}}(this)),window.mixpanel_data.challenge=this.submission_model.slug)},ChallengeView.prototype.setForum=function(page){var challenge_slug,contest_slug,forum_abtest,sort_type;return null==page&&(page=1),HR.appController.setTitle(this.title_leading+" Discussion"+this.title_ending),this.activeTab="forum",this.setTab("#"+this.activeTab+"Tab"),this.showLoading("forum"),challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),forum_abtest=HR.ABTest.get_variant("forum-sort-type"),sort_type="master"!==this.contest.get("slug")||"treatment"!==forum_abtest&&"treatment_small"!==forum_abtest?"(up_votes - down_votes)":"created_at",this.contest.get("comment_live_sync")===!0?this.comment_collection||(this.comment_collection=new HR.CommentCollection,this.comment_collection.page=page,this.comment_collection.setChallengeSlug(challenge_slug),this.comment_collection.setContestSlug(contest_slug),this.comment_collection.setSortBy(sort_type),this.comment_collection.cached()):(this.comment_collection||(this.comment_collection=new HR.CommentCollection,this.comment_collection.page=page,this.comment_collection.setChallengeSlug(challenge_slug),this.comment_collection.setContestSlug(contest_slug),this.comment_collection.setSortBy(sort_type)),this.comment_collection.cached({reset:!0})),HR.requires(["compound/forum-views"],function(_this){return function(){return _this.commentsView||(_this.commentsView=new HR.ChallengeCommentsView({challenge:_this.model,collection:_this.comment_collection,profile:_this.profile,contest:_this.contest}),_this.add_subview(_this.commentsView)),_this.showView("forum",_this.commentsView),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,challenge:challenge_slug}}}(this))},ChallengeView.prototype.clickForum=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=this.model.pageURL()+"/forum"?(HR.router.navigate(this.model.pageURL()+"/forum",!1),this.setForum()):void 0},ChallengeView.prototype.setEditorial=function(){var challenge_slug,contest_slug,editorial,hacker,options;return HR.appController.setTitle(this.title_leading+" Editorial"+this.title_ending),this.activeTab="editorial",this.header&&this.header.changeActiveTab(this.activeTab),this.setTab("#"+this.activeTab+"Tab"),this.showLoading("editorial"),challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),hacker=HR.profile(),options={challenge_slug:challenge_slug},editorial=HR.model("editorial",options).cached(),HR.requires(["compound/extra-views"],function(_this){return function(){return _this.editorialView||(_this.editorialView=new HR.EditorialView({challenge:_this.model,model:editorial,current_hacker:hacker}),_this.add_subview(_this.editorialView)),_this.showView("editorial",_this.editorialView),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,challenge:challenge_slug}}}(this))},ChallengeView.prototype.clickEditorial=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=this.model.pageURL()+"/editorial"?(HR.router.navigate(this.model.pageURL()+"/editorial",!1),this.setEditorial()):void 0},ChallengeView.prototype.setCustomPage=function(slug){var contest_slug,custom_tabs,our_tab;return custom_tabs=this.model.get("custom_tabs"),custom_tabs&&(our_tab=null,_.each(custom_tabs,function(tab){return tab.slug===slug?our_tab=tab:void 0}),our_tab&&(this.custom_view?this.custom_view.setTab(our_tab):(this.custom_view=new HR.ChallengeCustomView({tab:our_tab}),this.add_subview(this.custom_view)),this.activeTab=""+slug,this.setTab("#"+slug+"Tab"),this.showView(""+slug,this.custom_view,{tab:slug+"Tab"}))),null===contest_slug&&(contest_slug="master"),HR.appController.set_contest_namespace(this.model.get("contest_slug")),window.mixpanel_data={landing:!1,contest:contest_slug}},ChallengeView.prototype.setTopics=function(topic_slug){var challenge_slug,collection,contest_slug,hacker,options,topic_url;return null==topic_slug&&(topic_slug=null),topic_url=this.model.articleBaseUrl(),topic_slug&&(topic_url+="/"+topic_slug),HR.router.navigate(topic_url,!1),HR.appController.setTitle(this.title_leading+" Topics"+this.title_ending),this.activeTab="topics",this.setTab("#"+this.activeTab+"Tab"),challenge_slug=this.model.get("slug"),contest_slug=this.model.get("contest_slug"),hacker=HR.profile(),options={challenge_slug:challenge_slug,contest_slug:contest_slug},this.topicsView||(collection=HR.collection("topic-article",options).cached({reset:!0}),this.topicsView=new HR.TopicsListView({challenge:this.model,contest:this.contest,topic_slug:topic_slug,collection:collection,current_hacker:hacker},this.add_subview(this.topicsView))),topic_slug&&(this.topicsView.topic_slug=topic_slug),this.showView("topics",this.topicsView),HR.appController.set_contest_namespace(contest_slug),window.mixpanel_data={landing:!1,contest:contest_slug,challenge:challenge_slug}},ChallengeView.prototype.clickTopics=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=this.model.pageURL()+"/topics"?(this.model.trackViewTopics(),this.setTopics()):void 0},ChallengeView.prototype.setLeaderboard=function(page){var contest_slug;return null==page&&(page=1),HR.appController.setTitle(this.title_leading+" Leaderboard"+this.title_ending),contest_slug=this.model.get("contest_slug"),this.activeTab="leaderboard",this.setTab("#"+this.activeTab+"Tab"),this.leaderboard_collection||(this.leaderboard_collection=HR.collection("leaderboard"),this.leaderboard_collection.setPage(page),this.leaderboard_collection.setContestSlug(contest_slug),this.leaderboard_collection.setChallenge(this.model.get("slug")),this.leaderboard_collection.setChallengeLeaderboard(),this.leaderboard_collection.setIncludePractice(this.includePractice),this.leaderboardFilter&&this.leaderboard_collection.setFiltersFromString(this.leaderboardFilter),this.leaderboard_collection.cached()),this.leaderboard_view||(this.leaderboard_view=new HR.LeaderboardView({collection:this.leaderboard_collection,profile:HR.profile(),contest:this.contest,iscompanyModerator:this.iscompanyModerator,challenge:this.model}),this.add_subview(this.leaderboard_view)),this.showView("leaderboard",this.leaderboard_view),null===contest_slug&&(contest_slug="master"),HR.appController.set_contest_namespace(this.model.get("contest_slug")),window.mixpanel_data={landing:!1,contest:contest_slug}},ChallengeView.prototype.clickLeaderboard=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=this.model.pageURL()+"/leaderboard"?(HR.router.navigate(this.model.pageURL()+"/leaderboard",!1),this.setLeaderboard()):void 0},ChallengeView.prototype.clickCustomLink=function(e){var slug;return e.preventDefault(),slug=$(e.currentTarget).attr("data-slug"),"/"+Backbone.history.fragment!=this.model.pageURL()+"/"+slug?(HR.router.navigate(this.model.pageURL()+("/"+slug),!1),this.setCustomPage(slug)):void 0},ChallengeView.prototype.toggleLeaderboard=function(e){return this.leaderboard_collection.setIncludePractice(e.currentTarget.checked),this.leaderboard_collection.cached({fetch:!0})},ChallengeView.prototype.changePagination=function(e){var href,page;return"leaderboard"===this.activeTab?(page=$(e.currentTarget).attr("data-page"),href=$(e.currentTarget).attr("href"),HR.router.navigate(href,!1),this.leaderboard_collection.setPage(page),this.leaderboard_collection.cached({fetch:!0}),!1):void 0},ChallengeView.prototype.setExpertSolution=function(){var contest_slug;return HR.appController.setTitle(this.title_leading+" Expert Solution"+this.title_ending),contest_slug=this.model.get("contest_slug"),this.activeTab="expertSolution",this.setTab("#"+this.activeTab+"Tab"),this.comment_collection||(this.comment_collection=new HR.CommentCollection,this.comment_collection.page=1,this.comment_collection.setChallengeSlug(this.model.get("slug")),this.comment_collection.setContestSlug(contest_slug),this.comment_collection.setSortBy("created_at"),this.comment_collection.fetch({reset:!0})),HR.requires(["compound/expert-solution-views"],function(_this){return function(){return _this.expert_solution_view?_this.expert_solution_view.liveCodingSetup=!1:(_this.expert_solution_view=new HR.ExpertSolutionView({profile:HR.profile(),contest:_this.contest,challenge:_this.model,comment_collection:_this.comment_collection}),_this.add_subview(_this.expert_solution_view)),_this.showView("expertSolution",_this.expert_solution_view),null===contest_slug&&(contest_slug="master"),HR.appController.set_contest_namespace(_this.model.get("contest_slug")),window.mixpanel_data={landing:!1,contest:contest_slug}}}(this))},ChallengeView.prototype.clickExpertSolution=function(e){return e.preventDefault(),"/"+Backbone.history.fragment!=this.model.pageURL()+"/expert-solution"?(HR.router.navigate(this.model.pageURL()+"/expert-solution",!1),this.setExpertSolution()):void 0},ChallengeView.prototype.render=function(){return this.model.sync_status&&this.contest.sync_status?this.contest.get("testers_contest")&&this.profile.get("is_admin")!==!0&&this.model.get("can_edit")!==!0?(HR.router.e404(),this):void 0===this.model.get("body_html")||null===this.model.get("body_html")?(this.model.cachedFetch({fetch:!0}),this):(this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(_this){return function(template){return _this.has_template=!0,_this._template=template,_this.renderView()}}(this),this),this):($(this.el).html(HR.appController.viewLoader(64)),this)},ChallengeView.prototype.renderView=function(){$(this.el).html(this._template({model:this.model})),this.header||(this.header=new HR.ChallengeHeaderView({model:this.model,contest:this.contest,activeTab:this.activeTab,show_bookmarks:this.show_bookmarks})),this.assign({".challenge-header":this.header}),this.model.get("track")?$("challenge-nav-track-container").html("<a href='/domains/"+this.model.get("category")+"/"+this.model.get("track").slug+"' class='backbone'>"+this.model.get("track").name+"</a>"):$("challenge-nav-track-container").html(""),HR.util.hideNavigation(this.contest),this.renderBody(),this.contest.get("hidden")!==!0||this.contest.get("company_associated_contest")!==!1&&null!==this.contest.get("company_associated_contest")||$("div#breadcrumb").hide(),this.profile.isLoggedIn()||(this.signup_dialog=new HR.util.ShowLoginDialog({info_message:"Please signup or login in order to view this challenge",show_signup:!0}),this.signup_dialog.render())},ChallengeView.prototype.renderBody=function(){return this.bootstrapTitle(),this.setBreadcrumb(),this.cleanupSubviews(),this.customView?this.showView(this.activeTab,this.customView):"leaderboard"===this.activeTab?this.setLeaderboard(this.paramPage||1):"submissions"===this.activeTab?this.submissionId?this.setSubmission(this.submissionId):this.setSubmissions(this.paramPage||1):"forum"===this.activeTab?this.setForum(this.paramPage||1):"editorial"===this.activeTab?this.setEditorial():"expertSolution"===this.activeTab?this.setExpertSolution():"topics"===this.activeTab?this.setTopics(this.topic_slug):this.setProblem()},ChallengeView.prototype.cleanupSubviews=function(){var views;return views=["leaderboard_view","editorialView","commentsView","submissionView","submissionsView","challegeTemplateView"],_.each(views,function(view){return this[view]?(this[view].destroy(),this[view]=void 0):void 0},this)},ChallengeView.prototype.bootstrapTitle=function(){var cat,chap,chap_slug,chapter;return chapter=this.model.get("track"),chap=null,cat=null,chapter&&"master"===this.contest.get("slug")&&(chap_slug=chapter.slug,cat=_.first(_.filter(HR.contest().get("categories"),function(_cat){return chap=_.first(_.filter(_cat.children,function(_chap){return _chap.slug===chap_slug})),null!==chap&&void 0!==chap})),cat&&(chap=_.first(_.filter(cat.children,function(_chap){return _chap.slug===chap_slug})))),this.title_leading=this.model.get("name"),chap&&chap.name&&cat&&cat.name?"tutorials"===cat.slug?this.title_ending=" | "+chap.name+" Tutorial":this.title_ending=" | "+cat.name+" Question":this.title_ending=" | "+HR.contest().get("name")+" Question | Contests"},ChallengeView.prototype.showLoading=function(tab){return tab&&tab===this.activeTab?(this.$(".challenge-container-element").addClass("hidden"),this.$(".challenge-container-elements-loading").removeClass("hidden")):void 0},ChallengeView.prototype.showView=function(name,view,options){var assignment,container_name,tab;return null==options&&(options={}),tab=options.tab?options.tab:name+"Tab",_.each(this.$(".challenge-container-element"),function(el){return $(el).hasClass("challenge-container-elements-loading")?void 0:$(el).remove()}),container_name="challenge-body-elements-"+name,this.$(".challenge-body").find("."+container_name).length>0||this.$(".challenge-body").append("<div class='"+container_name+" hidden challenge-container-element'></div>"),assignment={},assignment["."+container_name]=view,this.assign(assignment),this.activeTab===name?(this.$(".challenge-container-element").addClass("hidden"),this.$("."+container_name).removeClass("hidden"),this.setTab("#"+tab)):void 0},ChallengeView.prototype.renderScore=function(contest,challenge){var rank,score;return $(".domain-scores").hide(),this.model.get("track")&&"tutorials"===this.model.get("track").track_slug?void 0:(null==contest&&(contest=this.contest),null==challenge&&(challenge=this.model),"master"===contest.get("slug")&&this.profile.get("scores")&&this.model.get("track")&&this.profile.get("scores")[this.model.get("track").track_slug]?(score=this.profile.get("scores")[this.model.get("track").track_slug].practice.score,rank=this.profile.get("scores")[this.model.get("track").track_slug].practice.rank,$(".domain-rank").html(rank),$(".domain-rank-span").show(),$(".domain-score").html(score.toFixed(2)),$(".domain-scores").show(),HR.requires(["compound/extra-views"],function(_this){return function(){return _this.badge_view||(_this.badge_view=new HR.BadgeProgressView({track:_this.model.get("track").track_slug})),_this.badge_view.setElement($(".badge-progress")),_this.badge_view.render()}}(this))):void 0)},ChallengeView.prototype.destroy=function(){return $(".hide-in-private-contest").show(),$(".page_navigation-sidebar-disabled").addClass("page_navigation-sidebar"),$(".page_navigation-sidebar").removeClass("page_navigation-sidebar-disabled"),this.signup_dialog&&this.signup_dialog.destroy(),ChallengeView.__super__.destroy.apply(this,arguments)},ChallengeView.prototype.bookmarkChallenge=function(e){var source,status,success;return status=!this.model.get("bookmarked"),source="challenge",this.model.bookmarkChallenge(source,success=function(_this){return function(){return $("#ajax-msg-wrap").addClass("hide"),status&&setTimeout(function(){return _this.$(".saved-text").css("display","inline-block").delay(2e3).fadeOut("slow")},0),setTimeout(function(){return $("#ajax-msg-wrap").removeClass("hide")},200)}}(this))},ChallengeView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.ChallengeView=ChallengeView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeHeaderView,HR;return ChallengeHeaderView=function(superClass){function ChallengeHeaderView(){return ChallengeHeaderView.__super__.constructor.apply(this,arguments)}return extend(ChallengeHeaderView,superClass),ChallengeHeaderView.prototype.template="challenge-header",ChallengeHeaderView.prototype.className="challenge-header-view",ChallengeHeaderView.prototype.initialize=function(options){return this.activeTab=options.activeTab,this.contest=options.contest,this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.model.bind("unlockEditorial",this.render,this),this.show_bookmarks=options.show_bookmarks},ChallengeHeaderView.prototype.render=function(){var breadCrumbs,bread_crumbs_view;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),contest:this.contest,baseURL:this.model.pageURL(),activeTab:this.activeTab,show_bookmarks:this.show_bookmarks})),this.$(".apply-blob")&&(this.apply_blob_view?this.apply_blob_view.setElement(this.$(".apply-blob")):(this.apply_blob_view=new HR.ViewShiv({view:"apply-blob",model:this.model,el:this.$(".apply-blob")}),this.add_subview(this.apply_blob_view)),this.apply_blob_view.render()),breadCrumbs=this.model.breadCrumbs(),breadCrumbs.remove(breadCrumbs.last()),bread_crumbs_view=HR.util.renderBreadCrumbs(this.$("div.breadcrumbs"),breadCrumbs),this.add_subview(bread_crumbs_view),this},ChallengeHeaderView.prototype.changeActiveTab=function(active_tab){return this.activeTab=active_tab,this.render()},ChallengeHeaderView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeHeaderView=ChallengeHeaderView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeTemplateView,HR;return ChallengeTemplateView=function(superClass){function ChallengeTemplateView(){return ChallengeTemplateView.__super__.constructor.apply(this,arguments)}return extend(ChallengeTemplateView,superClass),ChallengeTemplateView.prototype.template="challenge-template",ChallengeTemplateView.prototype.className="challenge-template-view",ChallengeTemplateView.prototype.initialize=function(options){return null==options&&(options={}),this.contest=options.contest,this.submission_id=options.submission_id,this.parent=options.parent,this.companySlug=options.companySlug,this.companyName=options.companyName,this.companyId=options.companyId,this.companyFollowing=options.companyFollowing,this.challengeModel=options.challengeModel,this.feedFullScreenMode=options.feedFullScreenMode},ChallengeTemplateView.prototype.setTopics=function(slug){return this.parent.setTopics(slug)},ChallengeTemplateView.prototype._assignViews=function(){var kwargs;return"mcq"===this.model.get("kind")?this.assign({".mcq-challenge-view":this.mcq_challenge_view}):(kwargs={".challenge-content":this.content_view},"article"!==this.model.get("kind")&&(kwargs=$.extend(kwargs,{".challenge-request":this.request_view,".challenge-response":this.response_view,".challenge-copyright":this.copyright_view})),this.assign(kwargs))},ChallengeTemplateView.prototype.render=function(){var height,info_string,noscroll,style,width,zen;return"mcq"===this.model.get("kind")?(0===this.$("mcq-challenge-view").length&&$(this.el).html('<div class="mcq-challenge-view"></div>'),this.mcq_challenge_view||(this.mcq_challenge_view=new HR.MCQChallengeView({parent:this,model:this.model,contest:this.contest}),this.add_subview(this.mcq_challenge_view)),this._assignViews()):(0===this.$(".challenge-content").length&&(info_string="",this.model.get("track")&&"fp"===this.model.get("track").track_slug&&(info_string='<div class="fp-info container fs-container plB"><p class="clearfix grey-header cap plL plR psT psB" style="color: #a50;border-bottom: 1px solid #c2c7d0;">If you cannot find your favorite language here, please check out the <a class="backbone" href="/domains/algorithms" data-analytics="FpMessageAlgoLink" >algorithm domain</a>. We support over 40 popular languages.</p></div>'),$(this.el).html('<div class="challenge-content"></div>'+info_string+'<div class="challenge-request"></div><div class="challenge-response container fs-container"></div><div class="challenge-copyright"></div>')),this.content_view||(this.content_view=new HR.ChallengeContentView({parent:this,model:this.model,contest:this.contest,companySlug:this.companySlug,feedFullScreenMode:this.feedFullScreenMode}),this.add_subview(this.content_view)),"article"!==this.model.get("kind")&&(this.request_view||(this.request_view=new HR.ChallengeRequestView({parent:this,model:this.model,submission_id:this.submission_id,contest_id:this.contest.id,companySlug:this.companySlug,companyName:this.companyName,companyId:this.companyId,companyFollowing:this.companyFollowing,challengeModel:this.challengeModel,feedFullScreenMode:this.feedFullScreenMode}),this.add_subview(this.request_view)),this.response_view||(this.response_view=new HR.ChallengeResponseView({parent:this,model:this.model}),this.add_subview(this.response_view)),this.copyright_view||(this.copyright_view=new HR.ChallengeCopyrightView({parent:this,model:this.model,contest_id:this.contest.id}),this.add_subview(this.copyright_view))),this._assignViews()),height=parseInt(HR.util.getParameterByName("height")),width=parseInt(HR.util.getParameterByName("width")),noscroll=HR.util.getParameterByName("noscroll"),zen=HR.util.getParameterByName("zen"),"true"===zen&&(style="",!_.isNaN(height)&&height>0&&(style+=".CodeMirror {height: "+height+"px !important;}\n",this.$(".challenge-content").hide(),this.$(".challenge-copyright").hide(),$(".challenge-header").hide(),$(".page_footer").hide(),$(".challenge-container-element").addClass("plT")),!_.isNaN(width)&&width>0&&(style+=".challenge-input {width: "+width+"px !important; margin: auto;}\n",style+=".challenge-response {width: "+width+"px !important; margin: auto;}\n",style+="#codeshell-wrapper {width: "+width+"px !important; margin: auto;}\n",style+=".output-area-wrap {width: "+width+"px !important; margin: auto;}\n"),("1"===noscroll||"true"===noscroll)&&$(".challenge-container-element").addClass("absolute-overlay-wrap"),this.parent.$("style").html(style)),this},ChallengeTemplateView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeTemplateView=ChallengeTemplateView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeCustomView,HR,ref;return ChallengeCustomView=function(superClass){function ChallengeCustomView(){return ChallengeCustomView.__super__.constructor.apply(this,arguments)}return extend(ChallengeCustomView,superClass),ChallengeCustomView.prototype.template="challenge-custom",ChallengeCustomView.prototype.className="challenge-custom-view",ChallengeCustomView.prototype.initialize=function(options){return this.tab=options.tab},ChallengeCustomView.prototype.render=function(){var body;return body=this.tab.sidebar?'<div class="span-md-11 plL psR hackdown-content">\n  '+this.tab.content+'\n</div>\n<aside class="span-md-4 pull-right psL plR hackdown-content">\n  '+this.tab.sidebar+"\n</aside>":'<div class="span-md-16 plL plR hackdown-content">\n  '+this.tab.content+"\n</div>",$(this.el).html('<div class="container">\n  <div class="row">\n    '+body+"\n  </div>\n</div>"),this},ChallengeCustomView.prototype.setTab=function(tab){return this.tab=tab,this.render()},ChallengeCustomView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.ChallengeCustomView=ChallengeCustomView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var CommonTopicView,HR,ref;return CommonTopicView=function(superClass){function CommonTopicView(){return CommonTopicView.__super__.constructor.apply(this,arguments)}return extend(CommonTopicView,superClass),CommonTopicView.prototype.initialize=function(){return _.bindAll(this,"documentScroll"),$(window).scroll(this.documentScroll)},CommonTopicView.prototype.documentScroll=function(){var toc_top;return toc_top=50,this.$(".hackdown").each(function(){var hack_offset,hackdown_element,hackdown_toc_element,height,toc_left,toc_offset,width,window_top;return hackdown_element=$(this),hackdown_toc_element=hackdown_element.find(".hackdown-fixed"),0!==hackdown_toc_element.length?(hackdown_toc_element=hackdown_toc_element.first(),hack_offset=hackdown_element.offset(),toc_offset=hackdown_toc_element.offset(),window_top=$(window).scrollTop(),window_top+toc_top<hack_offset.top?hackdown_toc_element.removeClass("fixed"):window_top+toc_top>=hack_offset.top&&window_top+hackdown_toc_element.height()+toc_top<hack_offset.top+hackdown_element.height()?(hackdown_toc_element.hasClass("fixed")||(width=hackdown_toc_element.css("width"),height=hackdown_toc_element.css("height"),hackdown_toc_element.addClass("fixed"),hackdown_toc_element.css("left",toc_offset.left),hackdown_toc_element.css("top",toc_top),hackdown_toc_element.css("max-width",width),hackdown_toc_element.css("max-height",height)),parseInt(hackdown_toc_element.css("top"))!==toc_top&&hackdown_toc_element.css("top",toc_top),toc_left=.75*parseInt(hackdown_element.css("width"))+hack_offset.left,parseInt(hackdown_toc_element.css("left"))!==toc_left?hackdown_toc_element.css("left",toc_left):void 0):window_top<hack_offset.top+hackdown_element.height()?(hackdown_toc_element.hasClass("fixed")||hackdown_toc_element.addClass("fixed"),hackdown_toc_element.css("top",hack_offset.top+hackdown_element.height()-window_top-hackdown_toc_element.height())):hackdown_toc_element.removeClass("fixed")):void 0})},CommonTopicView.prototype.events={"click .scroll-to-topics-top":"scrollToTop","click li.toc-title-link, a.toc-title-link":"titleLinkClick","click a.hryoutube-open-modal":"renderYoutubeModal","click .hackdown-tab":"toggleHackdownTab","click a.answer-true":function(e){return this.$(e.currentTarget).removeClass("circle-empty").addClass("icon-ok")},"click a.answer-false":function(e){return this.$(e.currentTarget).removeClass("circle-empty").addClass("icon-cancel-large")},"recommendation-shown .hackdown-article":"recommendationShown","recommendation-shown .hackdown-recommendation":"recommendationShown","click a.runcode-run-btn":"runCode"},CommonTopicView.prototype.scrollToTop=function(){return this.$("#content").length>0?$("html,body").animate({scrollTop:this.$("#content").offset().top}):this.$(".topics-list-container").length>0?$("html,body").animate({scrollTop:this.$(".topics-list-container").offset().top-150}):$("html,body").animate({scrollTop:0})},CommonTopicView.prototype.titleLinkClick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),$("html,body").animate({scrollTop:this.$(this.$(e.currentTarget).attr("data-href")).offset().top})},CommonTopicView.prototype.scrollToHackdownTop=function(e){var hackdown_parent;return hackdown_parent=this.$(e.currentTarget).closest(".hackdown"),$("html,body").animate({scrollTop:hackdown_parent.offset().top})},CommonTopicView.prototype.renderYoutubeModal=function(e){var current_hacker,dialog,youtube_id;return e.stopImmediatePropagation(),e.preventDefault(),youtube_id=this.$(e.currentTarget).attr("data-id"),current_hacker=HR.profile(),dialog=new HR.util.VideoDialog({youtube_id:youtube_id,title:"",username:current_hacker.get("username"),hacker_id:current_hacker.get("id")}),dialog.render()},CommonTopicView.prototype.toggleHackdownTab=function(e){var $target,obj;return $target=this.$(e.currentTarget),obj=$target.next(),obj.hasClass("toggled")?($target.removeClass("toggled-tab"),obj.slideDown(function(){return obj.removeClass("toggled"),obj.hasClass("hackdown-recommendation")||obj.hasClass("hackdown-article")?obj.trigger("recommendation-shown"):void 0})):obj.slideUp(function(){return obj.addClass("toggled"),$target.addClass("toggled-tab")})},CommonTopicView.prototype.renderHackdownCode=function(){var generateRunCodeBlock;return generateRunCodeBlock=function($elem){var $input_elem,$output_elem,code,code_mirror,language;if(!$elem.hasClass("runcode-rendered"))return $elem.addClass("runcode-rendered"),code=$elem.text().trim(),language=$elem.attr("data-code-language"),code_mirror=$("<div></div>").addClass("runcode-codemirror"),HR.appController.loadCodeMirrorMode(language,function(){var myCodeMirror;return $elem.after(code_mirror),myCodeMirror=CodeMirror(code_mirror[0],{value:code,lineNumbers:!0,mode:lang_mime_mapping[language],readOnly:!0}),$elem.hide()}),$input_elem=$elem.closest(".hackdown-runcode").find(".runcode-run .runcode-input"),$output_elem=$elem.closest(".hackdown-runcode").find(".runcode-run .runcode-output"),0===$input_elem.val().length?$input_elem.parent().hide():void 0},this.$(".runcode-code").each(function(){return generateRunCodeBlock($(this))}),this.hackdownLoaded()},CommonTopicView.prototype.hackdownLoaded=function(){return this.$(".hackdown-recommendation").each(function(){return $(this).trigger("recommendation-shown")}),this.$(".hackdown-article").each(function(){return $(this).trigger("recommendation-shown")})},CommonTopicView.prototype.runCode=function(e){var $elem,challenge_slug,code,code_object,compile_test1,input,language,output_object;return $elem=this.$(e.currentTarget),$elem.hasClass("disabled")?void 0:($elem.addClass("disabled"),code_object=$elem.closest(".hackdown-runcode").find(".runcode-code"),code=code_object.text(),language=code_object.attr("data-code-language"),language||(language="c"),input=$elem.closest(".runcode-run").find(".runcode-input").val(),output_object=$elem.closest(".runcode-run").find(".runcode-output"),challenge_slug="topic-article-submissions",compile_test1=new HR.CompileTestModel({code:code,language:language}),compile_test1.setChallenge(new HR.ChallengeModel({slug:challenge_slug})),compile_test1.set("customtestcase",!0),compile_test1.set("custominput",input),compile_test1.save(null,{error:function(){return $elem.removeClass("disabled")}}),compile_test1.bind("change:status",function(model,status1){var lines,output,signal;return status1>0?model.get("errors")||!model.get("status")||0!==model.get("result")?void output_object.val("ERROR"):(signal=model.get("signal")[0],"undefined"!=typeof signal&&0===signal?(output=model.get("stdout")[0],output_object.val(output),lines=Math.min(output.split("\n").length,15),output_object.attr("rows",lines)):null!=model.get("stderr")&&null!=model.get("stderr")[0]?(output=model.get("stdout")[0],
output_object.val(output),lines=Math.min(output.split("\n").length,15),output_object.attr("rows",lines)):output_object.val("Unexpected Error.\nPlease try again after some time"),$elem.removeClass("disabled")):void 0}))},CommonTopicView.prototype.recommendationShown=function(e){var $elem,a_id,c_id,preview,that,title;return that=this,$elem=this.$(e.currentTarget),c_id=$elem.attr("data-challenge-id"),a_id=$elem.attr("data-article-id"),title=void 0,preview=void 0,c_id?($elem.html("<span class='inline-throbber loading'></span>"),$.ajax({dataType:"json",url:"/rest/contests/master/challenges/"+c_id,success:function(data){return title=data.model.name,$elem.html(""),$elem.append("<a class='btn btn-primary backbone pull-right' href='/challenges/"+c_id+"/'>Solve</a>"),preview=data.model.preview,title&&($elem.append("<h3>"+title+"</h3>"),$elem.prev(".hackdown-tab").html(title+"<span class='pull-right hackdown-context'>Recommended Challenge</span>")),preview&&$elem.append("<p>"+preview+"</p>"),$elem.removeAttr("data-challenge-id")}})):a_id?$.ajax({dataType:"json",url:"/rest/topics/"+a_id,success:function(_this){return function(data){var $e,current_content;if($elem.attr("data-article-id"))if($elem.removeAttr("data-article-id"),title=data.model.title,current_content=$elem.html(),$elem.html(""),$elem.hasClass("show-full-article")){if(preview=data.model.content_html,title&&($elem.append('<h1 class="plL">'+title+"</h1>"),$elem.prev(".hackdown-tab").html(title+"<span class='pull-right hackdown-context'>Article</span>")),preview)return $e=$("<div></div>").html(preview),$(".hackdown-fixed",$e).remove(),$(".hackdown-toc",$e).remove(),$(".hackdown-full-article-parent-tab",$e).remove(),$(".show-full-article",$e).remove(),$elem.append($e),that.renderHackdownCode()}else if(preview=current_content,$elem.append("<a class='btn btn-primary backbone pull-right' href='/topics/"+a_id+"/'>View</a>"),title&&($elem.append("<h3>"+title+"</h3>"),$elem.prev(".hackdown-tab").html(title+"<span class='pull-right hackdown-context'>Recommended Article</span>")),preview)return $elem.append(preview)}}(this)}):void 0},CommonTopicView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.CommonTopicView=CommonTopicView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,TopicsListView,ref;return TopicsListView=function(superClass){function TopicsListView(){return TopicsListView.__super__.constructor.apply(this,arguments)}return extend(TopicsListView,superClass),TopicsListView.prototype.template="topicslist",TopicsListView.prototype.className="topics-list-view",TopicsListView.prototype.initialize=function(options){return TopicsListView.__super__.initialize.call(this),this.challenge=options.challenge,this.contest=options.contest,this.topic_slug=options.topic_slug,this.listRendered=!1,this.listenTo(this.collection,"reset",this.render),this.metric_sent=!1,this.topicViews=[],this.current_slug=this.topic_slug,this.parent=options.parent},TopicsListView.prototype.events=function(){return _.extend({},window.HR.CommonTopicView.prototype.events||{},{"click .topic-heading":"clickTopicHeading"})},TopicsListView.prototype.clickTopicHeading=function(e){var $element,name,slug;return e.preventDefault(),$element=$(e.currentTarget),slug=$element.attr("data-slug"),name=$element.html(),HR.router.navigate(this.challenge.articleBaseUrl()+"/"+slug,!1),hr_metrics.track("Click","ScrollToSlug",{attribute1:this.challenge.get("slug"),attribute2:this.contest.get("slug"),attribute3:this.current_slug,attribute4:slug}),this.challenge.trackViewArticle({article_name:name,article_slug:slug,location:"Table of Contents"}),this.current_slug=slug,this.scrollToSlug(slug)},TopicsListView.prototype.scrollToSlug=function(slug,timeout){return null==timeout&&(timeout=0),window.setTimeout(function(_this){return function(){return _this.$("#"+slug+"-topic").length>0?($("html,body").animate({scrollTop:_this.$("#"+slug+"-topic").offset().top}),_this.topic_slug=null):void 0}}(this),timeout)},TopicsListView.prototype.render=function(){var i,j,len,len1,model,ref,ref1,renderedViews,topicView;if(this.collection&&this.collection.sync_status){if($(this.el).html(HR.appController.template(this.template,this)({collection:this.collection.toJSON(),article_base_url:this.challenge.articleBaseUrl()})),!this.listRendered){for(ref=this.collection.models,i=0,len=ref.length;len>i;i++)model=ref[i],topicView=new HR.TopicView({model:model,parent:this,challenge:this.challenge,contest:this.contest}),this.add_subview(topicView),this.topicViews.push(topicView);this.listRendered=!0}for(renderedViews=$(),ref1=this.topicViews,j=0,len1=ref1.length;len1>j;j++)topicView=ref1[j],renderedViews.push(topicView.render().el);this.$(".topics-container").html(renderedViews),this.topic_slug&&(this.metric_sent||(hr_metrics.track("LoadTopicArticlePage",this.topic_slug,{attribute1:this.challenge.get("slug"),attribute2:this.contest.get("slug"),attribute3:this.topic_slug}),this.metric_sent=!0),this.scrollToSlug(this.topic_slug,200))}return this},TopicsListView}(window.HR.CommonTopicView),HR=null!=(ref=window.HR)?ref:{},HR.TopicsListView=TopicsListView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,TopicView,ref;return TopicView=function(superClass){function TopicView(){return TopicView.__super__.constructor.apply(this,arguments)}return extend(TopicView,superClass),TopicView.prototype.template="topic",TopicView.prototype.className="topic-view plT",TopicView.prototype.initialize=function(options){return this.parent=options.parent,this.challenge=options.challenge,this.contest=options.contest,this.listenTo(this.model,"reset",this.render)},TopicView.prototype.renderChallengeCard=function(){var challenge_model;return this.challengeCardView||(challenge_model=new HR.ChallengeModel(this.model.get("related_challenge")),challenge_model.sync_status=!0,this.challengeCardView=new HR.ChallengesListView({model:challenge_model,contest:this.contest,title_string:"Related challenge for <strong>"+this.model.get("title")+"</strong>",article_model:this.model,referrer_challenge:this.challenge,is_article_challenge:!0}),this.add_subview(this.challengeCardView)),this.$(".challenge-card-container").html(this.challengeCardView.render().el)},TopicView.prototype.render=function(){var renderTopic;return this.model&&this.model.get("title")&&(renderTopic=function(_this){return function(){return $(_this.el).html(HR.appController.template(_this.template,_this)({model:_this.model.toJSON(),challenge:_this.challenge.toJSON(),contest:_this.contest.toJSON()})),_this.model.get("related_challenge")&&_this.renderChallengeCard(),_this.parent.renderHackdownCode()}}(this),HR.requires(["MathJax/MathJax"],renderTopic),renderTopic()),this},TopicView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.TopicView=TopicView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeContentView,HR;return ChallengeContentView=function(superClass){function ChallengeContentView(){return ChallengeContentView.__super__.constructor.apply(this,arguments)}return extend(ChallengeContentView,superClass),ChallengeContentView.prototype.template="challenge-content",ChallengeContentView.prototype.className="challenge-content-view",ChallengeContentView.prototype.events=function(){return{"click .js-suggest-edits":"showSuggestionDiv","click .js-suggestion-save":"makeSuggestion","click .js-suggestion-cancel":"hideSuggestionDiv","click a#sidebar-more-button":"showMoreOptions","click .show-editorials-tab":"openEditorialsTab","click .show-topic-video":"showTopicVideo"}},ChallengeContentView.prototype.initialize=function(options){return null==options&&(options={}),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.contest=options.contest,this.current_hacker=HR.profile(),this.parent=options.parent,this.companySlug=options.companySlug,this.feedFullScreenMode=options.feedFullScreenMode,this.ctci_header_topics={crack1:"cracking analysis","ctci-big-o":"asymptotic analysis","ctci-array-left-rotation":"arrays","ctci-making-anagrams":"strings","ctci-ransom-note":"hashing","ctci-linked-list-cycle":"linked lists","ctci-balanced-brackets":"stacks","ctci-queue-using-two-stacks":"queues","ctci-is-binary-search-tree":"binary search trees","ctci-find-the-running-median":"heaps","ctci-contacts":"tries","ctci-bubble-sort":"bubble sort","ctci-comparator-sorting":"sorting","ctci-ice-cream-parlor":"binary search","ctci-connected-cell-in-a-grid":"depth-first search","ctci-bfs-shortest-reach":"breadth-first search","ctci-fibonacci-numbers":"recursion","ctci-recursive-staircase":"recursion and memoization","ctci-coin-change":"dynamic programming","ctci-lonely-integer":"bit manipulation","ctci-merge-sort":"merge sort"}},ChallengeContentView.prototype.render=function(){var ref;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),contest:this.contest.toJSON(),baseURL:this.model.pageURL(),smaller_font:this.smaller_font_ab,ctci_header_topics:this.ctci_header_topics,show_help_box:"undefined"!=typeof HR&&null!==HR&&null!=(ref=HR.ABTest)?ref.is_variant("show-support-forum-box","treatment"):void 0})),"article"!==this.model.get("kind")&&this.renderSidebar(),HR.util.updateExternalLinks(this.$(".challenge-text")),this},ChallengeContentView.prototype.showMoreOptions=function(){var h;return $("#sidebar-more-options").slideToggle(),h=$("#sidebar-more-button").html(),"More"===h?$("#sidebar-more-button").html("Collapse"):$("#sidebar-more-button").html("More")},ChallengeContentView.prototype.showTopicVideo=function(e){var $element,title,youtube_id;return e.preventDefault(),$element=$(e.currentTarget),youtube_id=$element.attr("data-attr3"),title=$element.attr("data-attr4"),HR.util.showVideoModal(this.model,title,youtube_id)},ChallengeContentView.prototype.openEditorialsTab=function(e){return e.preventDefault(),window.open(this.model.pageURL()+"/editorial")},ChallengeContentView.prototype.hideSuggestionDiv=function(e){return e.preventDefault(),$("#suggestion-form").slideToggle("fast",function(){return $(".js-suggest-edits").fadeIn(),$(".alert.error").hide()})},ChallengeContentView.prototype.renderSidebar=function(){return this.model.get("is_preview_contest")?void 0:(this.sidebar||(this.sidebar=new HR.ChallengeSidebarView({model:this.model,contest:this.contest,parent:this,companySlug:this.companySlug}),this.add_subview(this.sidebar)),this.assign({".challenge-sidebar-container":this.sidebar}))},ChallengeContentView.prototype.setTopics=function(slug){return this.parent.setTopics(slug)},ChallengeContentView.prototype.showSuggestionDiv=function(e){var support_config;return e.preventDefault(),support_config=new HR.SupportConfigModel({default_category_id:6,default_sub_category_id:20,lock_categories:!0,page_url:window.location.href.replace(/https:\/\/www\./,"")}),support_config.fetch(),$(".js-suggest-edits").fadeOut("fast",function(){return $("#suggestion-form").slideToggle().data("support_model",support_config)})},ChallengeContentView.prototype.makeSuggestion=function(e){var form_data,suggestion;return e.preventDefault(),suggestion=$("#suggestion").val().trim(),suggestion.length<20?void $(".alert.error").show().html("Your suggestion should contain at least 20 characters."):($(e.currentTarget).html("Processing Request...").attr("disabled","disabled"),form_data={suggestion:$("#suggestion").val(),challenge_id:this.model.get("id"),challenge_url:"www.hackerrank.com/"+Backbone.history.fragment,contest_slug:HR.appController.get_current_contest_slug(),support_config:$("#suggestion-form").data("support_model").toJSON()},$.ajax({url:"/rest/challenge_edit_suggestion",type:"POST",data:form_data,success:function(data){var error,i,j,len,ref;if($(e.currentTarget).removeAttr("disabled").html("Submit"),data.status)return $("#suggestion").val(""),$(".alert.error").hide(),$(".alert.success").show().fadeOut(1e3),$("#suggestion-form").slideToggle(),$(".js-suggest-edits").fadeIn();if(0===data.errors.length)error="Unknown Error";else if(1===data.errors.length)error=data.errors[0];else{for(error="<ul style='text-align: left;'>",len=data.errors.length-1,i=j=0,ref=len;ref>=0?ref>=j:j>=ref;i=ref>=0?++j:--j)error+="<li>"+data.errors[i]+"</li>";error+="</ul>"}return $(".alert.error").show().html(error)},error:function(XMLHttpRequest,textStatus,code){return 403===code?$(".alert.error").show().html("Please log in to suggest an edit."):$(".alert.error").show().html("Unknown Error")}}))},ChallengeContentView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeContentView=ChallengeContentView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeSidebarView,HR;return ChallengeSidebarView=function(superClass){function ChallengeSidebarView(){return ChallengeSidebarView.__super__.constructor.apply(this,arguments)}return extend(ChallengeSidebarView,superClass),ChallengeSidebarView.prototype.template="challenge-sidebar",ChallengeSidebarView.prototype.className="challenge-sidebar-view",ChallengeSidebarView.prototype.events=function(){return{"click .recent-hacker-prev":"recentHackersPrevious","click .recent-hacker-next":"recentHackersNext","change select.translations":"changeLanguage","click a.language-preference":"setLanguagepreference","click a.related-topic-link":"clickRelatedTopicLink","click .bb-rate-challenge":"rateChallenge","hover div.challenge-rating > .icon--single":"hoverChallengeRating","mouseleave div.challenge-rating":"preLoadedContent","click div.challenge-rating > .icon--single":"clickChallengeRating","click .video-modal":"videoModal"}},ChallengeSidebarView.prototype.initialize=function(options){var that;return null==options&&(options={}),this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.page=1,this.count=25,this.hard_limit=100,this.recent_hacker_sync=!1,this.current_hacker=HR.profile(),this.challenge=options.challenge,this.parent=options.parent,this.contest=options.contest,this.challenge_id=this.model.id,this.hacker_id=this.current_hacker.id,this.companySlug=options.companySlug,this.challengeRatingCollection=new HR.collection("challenge-ratings",{challenge_id:this.challenge_id,hacker_id:this.hacker_id}),that=this,this.challengeRatingCollection.fetch({success:function(){return that.render()}})},ChallengeSidebarView.prototype.clickRelatedTopicLink=function(e){var $element,name,slug;return e.preventDefault(),$element=$(e.currentTarget),slug=$element.attr("data-slug"),name=$element.html(),this.model.trackViewArticle({article_name:name,article_slug:slug,location:"Right Rail"}),this.parent.setTopics(slug)},ChallengeSidebarView.prototype.changeLanguage=function(e){var changed_language,filter,html;return $("#preference-msg").css("display","none"),changed_language=$(e.currentTarget).val(),filter=_.select(this.model.get("available_translations"),function(translation){return translation.language===changed_language}),this.current_hacker.get("local_language")||$("#preference-msg").css("display","inline-block"),1===filter.length?(html=filter[0].body_html,$(".challenge-text").html(html),$(".hr_tour-challenge-name").html(filter[0].name||this.model.get("name")),this.updatePdfLink(filter[0].language)):(html=this.model.get("body_html"),$(".challenge-text").html(html),$(".hr_tour-challenge-name").html(this.model.get("name")),this.updatePdfLink("English")),hr_metrics.track("ChangeProblemLanguage",changed_language,{attribute1:this.model.get("slug")})},ChallengeSidebarView.prototype.updatePdfLink=function(language){var element,pdf_url,rest;return $("#pdf-link").length>0?(element=$("#pdf-link")[0],pdf_url="/rest"+HR.appController.namespace(HR.appController.get_current_contest_slug(),rest=!0)+"challenges/"+this.model.get("slug")+"/download_pdf?language="+language,$("#pdf-link")[0].href=pdf_url):void 0},ChallengeSidebarView.prototype.setLanguagepreference=function(e){var changed_language;return changed_language=$(".translations :selected").text().trim(),e.preventDefault(),$("#preference-msg").html("Saving language preference..."),this.current_hacker.set("local_language",changed_language),this.current_hacker.save(null,{success:function(){return $("#preference-msg").html("Language preference updated."),setTimeout(function(){return $("#preference-msg").css("display","none")},3e3)},error:function(){return $("#preference-msg").html("There was some error while saving your preferences.")}})},ChallengeSidebarView.prototype.recentHackersPrevious=function(){return this.recent_hacker_sync?this.page<=1?void 0:(this.page=this.page-1,this.recent_hackers_page=this.recent_hackers.slice((this.page-1)*this.count,this.page*this.count),this.render()):void 0},ChallengeSidebarView.prototype.recentHackersNext=function(){return this.recent_hacker_sync?this.page*this.count>=parseInt(this.model.get("submitted_hackers_count"))||this.page*this.count>=this.hard_limit?void 0:(this.page=this.page+1,this.recent_hackers_page=this.recent_hackers.slice((this.page-1)*this.count,this.page*this.count),this.render()):void 0},ChallengeSidebarView.prototype.get_recent_hackers=function(){var that;return that=this,this.recent_hacker_sync=!1,this.render(),$.ajax({url:this.model.restURL()+"/recent_hackers",success:function(data){return that.recent_hackers=data,that.recent_hackers_page=that.recent_hackers.slice(0,that.count),that.recent_hacker_sync=!0,that.render()}})},ChallengeSidebarView.prototype.videoModal=function(e){var $element,title,youtube_id;return e.preventDefault(),$element=$(e.currentTarget),youtube_id=$element.attr("data-attr3"),title=$element.attr("data-attr4"),HR.util.showVideoModal(this.model,title,youtube_id)},ChallengeSidebarView.prototype.render=function(){var base,base1;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),contest:this.contest.toJSON(),article_base_url:this.model.articleBaseUrl(),companySlug:this.companySlug,showAllTestCase:this.showAllTestCase,logged_in:this.current_hacker.isLoggedIn()})),this.contest&&("master"===this.contest.get("slug")?(this.page="challenges",this.name=this.model.get("name"),this.slug=this.model.get("slug")):(this.page="contest",this.name=this.contest.get("name"),this.slug=this.contest.get("slug")),"challenges"===this.page&&(("function"==typeof(base=this.slug).startsWith?base.startsWith("30"):void 0)?this.page="30daysofcode":("function"==typeof(base1=this.slug).startsWith?base1.startsWith("ctci"):void 0)&&(this.page="crackingthecodinginterview"))),this.social_share_view_2||(this.social_share_view_2=new HR.SocialShareView2({page:this.page,name:this.name,slug:this.slug,parent:this}),this.add_subview(this.social_share_view_2)),this.assign(".social-share-wrap-2",this.social_share_view_2),this.setLanguageSelected(),this.preLoadedContent(),this.startRelatedTopicsTour(),HR.util.hideNavigation(this.contest),this.renderCountDownTimerView(),this},ChallengeSidebarView.prototype.startRelatedTopicsTour=function(){return"true"!==$.cookie("feed_onboarding_ongoing_"+this.current_hacker.id)&&this.eligibleForTour()?(this.current_hacker.set("related_topics_tour_done",!0,{silent:!0}),this.current_hacker.save({silent:!0}),setTimeout(function(_this){return function(){var intro;return intro=introJs(),intro.setOptions({steps:[{element:".related-topics"}],showBullets:!1,showButtons:!1,showStepNumbers:!1,tooltipClass:"hide",highlightClass:"topic-intro-highlight",overlayOpacity:.4}),intro.start(),$(".topic-intro-highlight").append('<i class="pull-right topic-tour-close-icon icon--single icon-cancel-small cursor"></i>'),$(".introjs-tooltipReferenceLayer").click(function(){return intro.exit()})}}(this),2e3)):void 0},ChallengeSidebarView.prototype.eligibleForTour=function(){return this.current_hacker.isLoggedIn()&&this.model.get("topics")&&this.model.get("topics").length>0&&!this.current_hacker.get("related_topics_tour_done")&&this.$(".related-topics").length>0},ChallengeSidebarView.prototype.setLanguageSelected=function(){var current_language;return current_language=this.model.get("preferred_language")?this.model.get("preferred_language"):"English",$("option[value="+current_language+"]").attr("selected","selected"),this.updatePdfLink(current_language)},ChallengeSidebarView.prototype.getPermaLink=function(){var path;return path=null!=this.companySlug?"/companies/"+this.companySlug+"/":HR.appController.current_contest_namespace+"/",document.location.protocol+"//"+document.location.host+path+"challenges/"+this.model.get("slug")},ChallengeSidebarView.prototype.showAllTestCase=function(){return this.model.has_all_test_cases_public||this.model.moderator_or_support},ChallengeSidebarView.prototype.hoverChallengeRating=function(e){var $currentTarget,index;return $currentTarget=$(e.currentTarget),index=$currentTarget.parent().find(".icon--single").index($currentTarget),this.colorStars($currentTarget,index)},ChallengeSidebarView.prototype.clickChallengeRating=function(e){var $currentTarget,attributes,index,save_flag;return e.preventDefault(),$currentTarget=$(e.currentTarget),index=$currentTarget.parent().find(".icon--single").index($currentTarget),this.rating=index+1,save_flag=!1,this.colorStars($currentTarget,index),this.challengeRatingCollection.length>0&&(this.challengeRating=this.challengeRatingCollection.models[0]),this.challengeRating&&this.challengeRating.attributes.rating!==this.rating?(save_flag=!0,attributes={rating:this.rating,message:"",categories:[]},this.challengeRating.set(attributes)):this.challengeRating||(save_flag=!0,this.challengeRating=new HR.ChallengeRatingModel({challenge_id:this.challenge_id,hacker_id:this.hacker_id,message:"",rating:this.rating})),save_flag===!0&&this.challengeRating.save(this.challengeRating.attributes,{success:function(_this){return function(){return _this.challengeRatingCollection.add(_this.challengeRating),_this.challengeRatingCollection.fetch()}}(this)}),this.rating<4?this.$(".rating_feedback").fadeIn().removeClass("hidden"):this.$(".rating_feedback").addClass("hidden"),$(".rating_reply").fadeIn().removeClass("hidden")},ChallengeSidebarView.prototype.colorStars=function($currentTarget,index){var i,results;for(i=0;index+1>i;)$currentTarget.parent().find(".icon--single").eq(i).removeClass("icon-star-empty").addClass("icon-star"),i+=1;for(results=[];5>i;)$currentTarget.parent().find(".icon--single").eq(i).removeClass("icon-star").addClass("icon-star-empty"),results.push(i+=1);return results},ChallengeSidebarView.prototype.preLoadedContent=function(){var $currentTarget,that;return that=this,$currentTarget=$('<i class="icon--single icon-star-empty cursor"></i>'),this.challengeRatingCollection.length>0&&(this.rating=this.challengeRatingCollection.models[0].attributes.rating),this.rating?(that.$(".challenge-rating .icon-star").removeClass("icon-star").addClass("icon-star-empty"),that.$(".challenge-rating .icon-star-empty:lt("+this.rating+")").removeClass("icon-star-empty").addClass("icon-star")):that.$(".challenge-rating .icon-star").removeClass("icon-star").addClass("icon-star-empty")},ChallengeSidebarView.prototype.rateChallenge=function(){return this.$(".rating_feedback").addClass("hidden"),this.$(".rating_reply").addClass("hidden"),this.rate_challenge=new HR.ChallengeRatingDialog({model:this.model,parent:this}),this.rate_challenge.render()},ChallengeSidebarView.prototype.renderCountDownTimerView=function(){return this.contest.ended()?this:(this.contest.openIndefinitely()||this.contest.isMaster()||(this.countdownTimerView||(this.countdownTimerView=new HR.CountdownTimerView({model:this.contest,template:"dashboard/countdowntimer_v2"}),this.add_subview(this.countdownTimerView)),this.countdownTimerView.setElement($(this.el).find(".countdowntimer")).render()),this.contest.get("time_limited_contest")?(this.headerCountdownTimerView||(this.headerCountdownTimerView=new HR.CountdownTimerView({model:this.contest,template:"dashboard/countdowntimer_v3",version:3,end_time_attribute:"effective_epoch_endtime"}),this.add_subview(this.headerCountdownTimerView)),this.headerCountdownTimerView.setElement(this.$(".header_countdowntimer")).render()):void 0)},ChallengeSidebarView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeSidebarView=ChallengeSidebarView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeRatingDialog,HR,ref;return ChallengeRatingDialog=function(superClass){function ChallengeRatingDialog(){return ChallengeRatingDialog.__super__.constructor.apply(this,arguments)}return extend(ChallengeRatingDialog,superClass),ChallengeRatingDialog.prototype.className="challenge-rating-dialog",ChallengeRatingDialog.prototype.initialize=function(options){return null==options&&(options={}),this.challenge_id=options.model.id,this.hacker_id=options.parent.current_hacker.id,this.rating=options.parent.rating,this.collection=options.parent.collection,this.challengeRating=options.parent.challengeRating},ChallengeRatingDialog.prototype.render=function(){var dialog,parent;return parent=this,dialog=new HR.util.ShowFormDialog({title:"<span class='mmL'>Help Us Improve</span>",width:500,body:"<div class='formgroup'> <div class='row'> <div class='span-xs-16 rating_feedback'> <p class='bold'>Which sections of this challenge need improvement?</p> <label><input type='checkbox' name='category' class='inline category pmL'  value='Problem Statement'>Problem Statement</label> <label><input type='checkbox' name='category' class='inline category pmL' align='left' value='Samples and Explanation'>Samples and Explanation</label> <label><input type='checkbox' name='category' class='inline category pmL' align='left' value='Test Cases'>Test Cases</label> <label><input type='checkbox' name='category' class='inline category psL' align='left' value='Other'>Other (Difficulty, Scoring, Classification, Originality, etc)</label> </div> </div> <p class='mdT bold'>Is there anything else you'd like to share with us?</p> <textarea name='description' rows='3' class='block-full-width description msT'></textarea> </div>",buttons:[{name:"Save","class":"hr_primary-btn hr-dialog-button",callback:function(dialog){var $form,attributes,btn,categories,key;if(hr_metrics.track("Click","RatedFeedback",{attribute11:!0}),btn=this,$form=dialog.$form(),categories=[],dialog.$el().find("input:checkbox[name=category]:checked").each(function(){return categories.push($(this).val())}),parent.challengeRating){attributes={challenge_id:parent.challenge_id,hacker_id:parent.hacker_id,categories:categories,message:$(".hr-dialog .formgroup textarea.description").val()};for(key in attributes)parent.challengeRating.set(key,attributes[key]);return parent.challengeRating.save(null,{success:function(_this){return function(){return dialog.destroy()}}(this)})}return dialog.destroy()}},{name:"Cancel",type:"hidden",callback:function(dialog){return hr_metrics.track("Click","RatedFeedback",{attribute11:!1}),this.setInactive(),dialog.destroy()}}]}),dialog.render()},ChallengeRatingDialog}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.ChallengeRatingDialog=ChallengeRatingDialog})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeRequestView,HR;return ChallengeRequestView=function(superClass){function ChallengeRequestView(){return ChallengeRequestView.__super__.constructor.apply(this,arguments)}return extend(ChallengeRequestView,superClass),ChallengeRequestView.prototype.template="challenge-request",ChallengeRequestView.prototype.className="challenge-request-view",ChallengeRequestView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.submission_id=options.submission_id,this.contest_id=options.contest_id,this.parent=options.parent,this.companySlug=options.companySlug,this.companyName=options.companyName,this.companyId=options.companyId,this.companyFollowing=options.companyFollowing,this.challengeModel=options.challengeModel,this.feedFullScreenMode=options.feedFullScreenMode},ChallengeRequestView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)()),-1!==$.inArray(this.model.get("kind"),["code","game","client-server","database"])?(this.codeeditor||(this.codeeditor=new HR.CodeEditorView({model:this.model,parent:this,submission_id:this.submission_id,companySlug:this.companySlug,companyName:this.companyName,companyId:this.companyId,companyFollowing:this.companyFollowing,challengeModel:this.challengeModel,feedFullScreenMode:this.feedFullScreenMode}),this.add_subview(this.codeeditor)),this.assign({"div.codeeditor-wrapper":this.codeeditor})):-1!==$.inArray(this.model.get("kind"),["design"])?(this.designCodeeditor||(this.designCodeeditor=new HR.DesignCodeEditorView({model:this.model,parent:this,submission_id:this.submission_id,contest_id:this.contest_id,companySlug:this.companySlug,companyName:this.companyName,companyId:this.companyId,companyFollowing:this.companyFollowing,challengeModel:this.challengeModel,feedFullScreenMode:this.feedFullScreenMode}),this.add_subview(this.designCodeeditor)),this.assign({"div.codeeditor-wrapper":this.designCodeeditor})):-1!==$.inArray(this.model.get("kind"),["dataset"])&&(this.datasets_upload_view||(this.datasets_upload_view=new HR.DataSetsUploadView({model:this.model,parent:this}),this.add_subview(this.datasets_upload_view)),this.assign({"div.codeeditor-wrapper":this.datasets_upload_view})),this},ChallengeRequestView.prototype.unSetFullScreenView=function(){return this.fullscreen_view=void 0},ChallengeRequestView.prototype.setFullScreenView=function(fullscreen_view){return this.fullscreen_view=fullscreen_view},ChallengeRequestView.prototype.unrenderFullScreenView=function(){return this.fullscreen_view?this.fullscreen_view.unRender():void 0},ChallengeRequestView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeRequestView=ChallengeRequestView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeResponseView,HR;return ChallengeResponseView=function(superClass){function ChallengeResponseView(){return ChallengeResponseView.__super__.constructor.apply(this,arguments)}return extend(ChallengeResponseView,superClass),ChallengeResponseView.prototype.template="challenge-response",ChallengeResponseView.prototype.className="challenge-response-view",ChallengeResponseView.prototype.initialize=function(options){return null==options&&(options={}),this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.response_type=null,this.onboarding=options.onboarding,this.bing_type_challenge=options.bing_type_challenge,HR.util.loadCssCustom(asset_path("async_compounds/animate.css"))},ChallengeResponseView.prototype.render=function(){return $(this.el).html("<h5 class='output-progress padded light-wrap hide mlT mlB psT' style='padding-top: 100px; padding-bottom: 100px; text-align: center;'></h5>\n<div class='output-area-wrap hide'>\n  <div class='output-area mlT psT' id='output-area'></div>\n</div>"),this.renderSubView(),this},ChallengeResponseView.prototype.renderSubView=function(){
return"compile_test"===this.response_type?this.renderCompileTestView():"submission"===this.response_type?this.renderSubmissionView():this.clear()},ChallengeResponseView.prototype.renderCompileTestView=function(){return"game"===this.model.get("kind")?this.subview||(this.subview=new HR.GameCompileTestView({model:this.compile_test,parent:this})):"code"===this.model.get("kind")||"database"===this.model.get("kind")?this.subview||(this.subview=new HR.CodeCompileTestView({model:this.compile_test,onboarding:this.onboarding,bing_type_challenge:this.bing_type_challenge,parent:this})):"client-server"===this.model.get("kind")&&(this.subview||(this.subview=new HR.ClientServerCompileTestView({model:this.compile_test,parent:this}))),this.assign({"#output-area":this.subview}),this.showHideViews()},ChallengeResponseView.prototype.setCompileTest=function(compile_test){return this.clearModelListeners(),this.response_type="compile_test",this.compile_test=compile_test,this.listenTo(this.compile_test,"reset",this.showHideViews),this.listenTo(this.compile_test,"change:id",this.showHideViews),this.listenTo(this.compile_test,"change:status",this.showHideViews),this.render()},ChallengeResponseView.prototype.renderSubmissionView=function(){return"game"===this.model.get("kind")||-1!==_.indexOf(["client-server","code","database"],this.model.get("kind"))&&(this.subview||(this.subview=new HR.SubmissionResponseView({model:this.submission,challenge:this.model,contest_score:this.contest_score,parent:this}))),this.assign({"#output-area":this.subview}),this.showHideViews()},ChallengeResponseView.prototype.setSubmissionView=function(submission){return this.clearModelListeners(),this.response_type="submission",this.submission=submission,this.contest_score=this.submission.get("contest_score"),this.listenTo(this.submission,"reset",this.showHideViews),this.listenTo(this.submission,"change:id",this.showHideViews),this.listenTo(this.submission,"change:status",this.showHideViews),this.render()},ChallengeResponseView.prototype.clearModelListeners=function(){return this.compile_test&&(this.stopListening(this.compile_test),this.clear()),this.submission?(this.subview&&this.subview.destroy(),this.stopListening(this.submission),this.clear()):void 0},ChallengeResponseView.prototype.showHideViews=function(){var status_string;return"compile_test"===this.response_type?2===this.compile_test.get("status")&&this.compile_test.get("errors")?this.showError():this.compile_test.get("status")>0||_.isArray(this.compile_test.get("games"))&&this.compile_test.get("games").length>0?(this.$(".output-progress").addClass("hide"),this.$(".output-area-wrap").removeClass("hide")):(this.$(".output-progress").removeClass("hide"),_.isNumber(this.compile_test.get("id"))?(status_string=this.compile_test.get("status_string"),_.isString(status_string)?this.$(".output-progress").html(status_string):this.$(".output-progress").html("Processing")):this.$(".output-progress").html("Uploading")):(this.response_type="submission")?this.$(".output-area-wrap").show():void 0},ChallengeResponseView.prototype.showError=function(){return this.$(".output-progress").html("<p class='error'>"+this.compile_test.get("errors").join("<br/>")+"</p>")},ChallengeResponseView.prototype.clear=function(){return this.subview&&(this.subview.destroy(),this.subview=void 0),this.$(".output-area").addClass("hide")},ChallengeResponseView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeResponseView=ChallengeResponseView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChallengeCopyrightView,HR;return ChallengeCopyrightView=function(superClass){function ChallengeCopyrightView(){return ChallengeCopyrightView.__super__.constructor.apply(this,arguments)}return extend(ChallengeCopyrightView,superClass),ChallengeCopyrightView.prototype.template="challenge-copyright",ChallengeCopyrightView.prototype.className="challenge-copyright-view",ChallengeCopyrightView.prototype.initialize=function(options){return null==options&&(options={}),this.contest_id=options.contest_id},ChallengeCopyrightView.prototype.render=function(){var d,year;return 1===this.contest_id?(d=new Date,year=d.getFullYear(),this.$el.html(HR.appController.template(this.template,this)({year:year}))):void 0},ChallengeCopyrightView}(window.HR.GenericView),HR=window.HR||{},HR.ChallengeCopyrightView=ChallengeCopyrightView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FullScreenView,HR;return FullScreenView=function(superClass){function FullScreenView(){return FullScreenView.__super__.constructor.apply(this,arguments)}return extend(FullScreenView,superClass),FullScreenView.prototype.el="body",FullScreenView.prototype.template="fullscreen",FullScreenView.prototype.initialize=function(options){return this.profile=HR.profile(),this.parent=options.parent,this.template_view=options.templateView,null!=this.parent&&(this.template_view=this.parent.parent.parent),this.feedFullScreenMode=options.feedFullScreenMode},FullScreenView.prototype.render=function(){var classes,set_height,that;return that=this,classes="",this.feedFullScreenMode===!0&&(classes+="feed-fullscreen "),0===$(this.el).find("#fullscreen-wrapper").length&&$(this.el).append("<div id='fullscreen-wrapper' class='"+classes+"'></div>"),$(this.el).css("overflow-y","hidden"),$(this.el).find("#fullscreen-wrapper").show(),$(this.el).find("#fullscreen-wrapper").height($(window).height()).html(_.template('<div class="left-sidebar"> <div class="challenge-content"></div> </div> <div class="separator"></div> <div class="right-sidebar"> <div class="challenge-request"></div> <div class="challenge-response"></div> <div class="challenge-copyright"</div> </div> <div class="clearfix"></div>')({model:this.model.toJSON()})),this.$left_sidebar=$(this.el).find("#fullscreen-wrapper .left-sidebar"),this.$right_sidebar=$(this.el).find("#fullscreen-wrapper .right-sidebar"),this.$separator=$(this.el).find("#fullscreen-wrapper .separator"),set_height=function(_this){return function(){return _this.$left_sidebar.height($(window).height()),_this.$right_sidebar.height($(window).height()),_this.$separator.height($(window).height())}}(this),set_height(),$(window).resize(set_height),$(document).keyup(function(_this){return function(e){return $(".editor-mode-button.vim.disabled").length<1&&27===e.keyCode?_this.template_view.request_view.codeeditor.restoreFullscreen():void 0}}(this)),this.template_view.request_view.setFullScreenView(this),this.assign({".left-sidebar .challenge-content":this.template_view.content_view,".right-sidebar .challenge-request":this.template_view.request_view,".right-sidebar .challenge-response":this.template_view.response_view,".right-sidebar .challenge-copyright":this.template_view.copyright_view}),$("div.separator").dragResize({activeColor:"#AAA",inactiveColor:"#DDD",resize:function(pageX,pageY){var document_width,left_sidebar_width,left_sidebar_width_px,right_sidebar_width,right_sidebar_width_px,separator_width;return separator_width=7,document_width=$(window).width(),left_sidebar_width_px=pageX,right_sidebar_width_px=document_width-left_sidebar_width_px,left_sidebar_width=100*(left_sidebar_width_px/document_width)-.25+"%",right_sidebar_width=100*(right_sidebar_width_px/document_width)-.25+"%",that.$left_sidebar.css("width",left_sidebar_width),that.$right_sidebar.css("width",right_sidebar_width),Backbone.trigger("fullScreenModeResize")}}),this},FullScreenView.prototype.unRender=function(){return $(this.el).css("overflow-y","visible"),$(this.el).find("#fullscreen-wrapper").length>0&&$(this.el).find("#fullscreen-wrapper").unbind().remove(),this.template_view.request_view.unSetFullScreenView(this),this.template_view.render()},FullScreenView}(window.HR.GenericView),HR=window.HR||{},HR.FullScreenView=FullScreenView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,MCQChallengeView;return MCQChallengeView=function(superClass){function MCQChallengeView(){return MCQChallengeView.__super__.constructor.apply(this,arguments)}return extend(MCQChallengeView,superClass),MCQChallengeView.prototype.template="mcq-challenge",MCQChallengeView.prototype.className="mcq-challenge-view",MCQChallengeView.prototype.initialize=function(options){return null==options&&(options={}),this.contest=options.contest,this.profile=HR.profile()},MCQChallengeView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),login:this.profile.isLoggedIn()})),this.model.get("solved")===!0&&this.$(".attempt-counter-container").hide(),this},MCQChallengeView.prototype.events=function(){return{"click .answer-icon":"startSubmission",submitAnswer:"submitAnswer","click .retry-button":"retry"}},MCQChallengeView.prototype.retry=function(e){return e.preventDefault(),this.model.set("retry",!0),this.render()},MCQChallengeView.prototype.startTimer=function(){return this.$(".qod-timer").removeClass("hidden"),this.max_width=this.$(".qod-timer").width(),this.progressTimer()},MCQChallengeView.prototype.progressTimer=function(){var current_width,func,that;return this.$(".qod-progress div").width(0),current_width=0,that=this,func=function(){return current_width+=1,that.$(".qod-progress div").width(current_width),current_width>=100?that.clearTimer():void 0},this.interval=setInterval(func,30)},MCQChallengeView.prototype.clearTimer=function(){return clearInterval(this.interval),$(this.el).trigger("submitAnswer")},MCQChallengeView.prototype.startSubmission=function(e){var checkbox;return e.preventDefault(),this.profile.isLoggedIn()?this.$(".icon-ok").length>0||this.$(".icon-cancel-large").length>0||(checkbox=$(e.currentTarget),checkbox.hasClass("inactive")||this.model.get("answer"))?void 0:checkbox.hasClass("circle-fill")?(clearInterval(this.interval),this.$(".qod-timer").addClass("hidden"),void checkbox.removeClass("circle-fill").addClass("circle-empty")):(clearInterval(this.interval),this._checkbox=checkbox,this._answer=checkbox.data("aid"),this.$(".answer-icon").removeClass("circle-fill").addClass("circle-empty"),this._checkbox.removeClass("circle-empty").addClass("circle-fill"),this.startTimer(),hr_metrics.track("McqSubmissionStarted","",{attribute1:this.model.get("id"),attribute2:this._answer})):void this.showLoginDialog()},MCQChallengeView.prototype.submitAnswer=function(){var success_callback,that;return this.$(".answer-icon").addClass("inactive"),that=this,success_callback=function(response){return that.questionSolved(response)},this.model.submitMcq(this._answer,this.contest.get("slug"),success_callback)},MCQChallengeView.prototype.questionSolved=function(response){var attempt_left,next_challenge_name,next_challenge_slug,ref;return this.$(".answer-icon").removeClass("circle-empty"),(null!=response?response.status:void 0)?(this.model.set("answer",response.correct_answer),this.model.set("hacker_mcq_attempt",response.model),this.model.set("attempt_counter",this.model.get("attempt_counter")+1),this.model.set("retry",!1),this.model.flush(),attempt_left=this.model.get("mcq_attempt_limit")-this.model.get("attempt_counter"),this.$(".attempt-counter").html(attempt_left),response.model.solved?(this._checkbox.removeClass("circle-fill").addClass("icon-ok"),this.$(".attempt-counter-container").hide()):(this._checkbox.removeClass("circle-fill").addClass("icon-cancel-large"),this.$(".answer-icon[data-aid='"+response.correct_answer+"']").removeClass("circle-empty").addClass("icon-ok"),attempt_left>0&&this.$(".retry-button").show()),"tutorials"===(null!=(ref=this.model.get("track"))?ref.track_slug:void 0)&&(response.model.next_challenge?(next_challenge_slug=response.model.next_challenge.slug,next_challenge_name=response.model.next_challenge.name,this.$(".next-challenge").html("<a class='backbone btn' href='"+HR.appController.get_current_contest_namespace()+("/challenges/"+next_challenge_slug+"' data-analytics='mcq-challenge-next'>")+("<span>"+next_challenge_name+"</span><span> (Next) &rsaquo;</span></a>")).show()):this.$(".next-challenge").html("").hide()),this.$(".qod-timer").addClass("hidden")):void 0},MCQChallengeView.prototype.showLoginDialog=function(){var dialog;return dialog=HR.util.ShowLoginDialog({error_message:"Please login in order to submit"}),dialog.render()},MCQChallengeView}(window.HR.GenericView),HR=window.HR||{},HR.MCQChallengeView=MCQChallengeView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var CodeEditorView,HR,ref;return CodeEditorView=function(superClass){function CodeEditorView(){return CodeEditorView.__super__.constructor.apply(this,arguments)}return extend(CodeEditorView,superClass),CodeEditorView.prototype.template="codeeditor",CodeEditorView.prototype.className="codeeditor-view",CodeEditorView.prototype.initialize=function(options){return this.model=options.model,this.parent=options.parent,this.profile=HR.profile(),this.forkable=!1,this.clipboardnotset=!0,this.submission_id=options.submission_id,this.companySlug=options.companySlug,this.companyName=options.companyName,this.companyId=options.companyId,this.companyFollowing=options.companyFollowing,this.challengeModel=options.challengeModel,this.feedFullScreenMode=options.feedFullScreenMode,this.submission_id&&(this.submission=HR.model("submission",{id:this.submission_id,contest_slug:HR.contest().get("slug")}),this.submission.disable_polling=!0,this.submission.fetch(),this.listenTo(this.submission,"reset",this.render),this.listenTo(this.submission,"change",this.render)),this.listenTo(this.profile,"reset",this.renderOptInView)},CodeEditorView.prototype.events={"click #codeshell-wrapper a.fullscreen":"makeFullscreen","click #codeshell-wrapper a.restorefullscreen":"restoreFullscreen","click #codeshell-wrapper button.upload_file":"confirmUploadFileDialog","codeshellcompile #codeshell-wrapper":"compileTest","codeshellsubmit #codeshell-wrapper":"submitPopup"},CodeEditorView.prototype.render=function(){return(this.submission_id&&this.submission.sync_status||!this.submission_id)&&0===$(this.el).find("#codeshell-wrapper").length&&($(this.el).html("<div id='codeshell-wrapper'></div><div id='submission-message'></div>"),HR.appController.loadCodeMirror(function(_this){return function(){return _this.applyCodeshell(),_this.profile.isLoggedIn()&&_this.renderOptInView(),_this.isFullscreened?_this.$(".fullscreen").click():void 0}}(this))),this},CodeEditorView.prototype.renderOptInView=function(){return null!=this.companySlug?(this.hackercompanypreferencesmodel=HR.model("hacker-company-preferences"),this.hackercompanypreferencesmodel.setCompanyId(this.companySlug),this.hackercompanypreferencesmodel.set({contest_slug:this.challengeModel.get("contest_slug"),challenge_slug:this.challengeModel.get("slug")}),this.hackerCompanyOptInView||(this.hackerCompanyOptInView=new HR.HackerCompanyOptInView({model:this.hackercompanypreferencesmodel,companyName:this.companyName})),this.add_subview(this.hackerCompanyOptInView),this.assign({"#codeshell-wrapper .code-checker":this.hackerCompanyOptInView})):void 0},CodeEditorView.prototype.applyCodeshell=function(){var editor,fork_data,that;return that=this,fork_data={},this.submission_id&&this.submission.get("code")&&(fork_data.initialCode=this.submission.get("code"),fork_data.initialLanguage=this.submission.get("language")),this.$("#codeshell-wrapper").codeshell($.extend($.extend({showCustomInput:this.model.get("compile_and_test")&&this.model.get("custom_case")&&!HR.util.getParameterByName("zen"),showCompileTest:this.model.get("compile_and_test"),showSubmit:!0,showUploadCode:!HR.util.getParameterByName("zen"),showFullScreen:!HR.util.getParameterByName("zen"),showTheme:!0,foldCode:!0,enableTrackTyping:!0,compile_button_text:"Run Code",enableIntellisense:!0,enableVersioning:this.profile.isLoggedIn(),versionIds:this.model.get("version_ids")||[],versioningRestUrl:this.model.restURL()+"/versions",dynamicMode:!0,languages:this.model.get("languages"),defaultLanguage:this.model.get("default_language"),autoSaveNamespace:"hr-cedit-contest:"+HR.contest().get("id")+"-challenge:"+this.model.get("id"),loadmode:function(_this){return function(e,data){return HR.appController.loadCodeMirrorMode(data.lang,function(){return data.callback()})}}(this)},this.model.getLanguageTemplates()),fork_data)),this.$("#codeshell-wrapper").codeshell("onChange",this.deleteMarkersOnSource),"true"===HR.util.getParameterByName("zen")?(editor=this.$("#codeshell-wrapper").codeshell("getEditor"),editor.setOption("lineWrapping",!1)):void 0},CodeEditorView.prototype.makeFullscreen=function(e){return this.isFullscreened||(this.$("#codeshell-wrapper").codeshell("saveLangCode"),this.fullscreen||(this.fullscreen=new HR.FullScreenView({model:this.model,parent:this,feedFullScreenMode:this.feedFullScreenMode})),this.fullscreen.render(),this.isFullscreened=!0),this.$(".fullscreen").addClass("force-hide").removeClass("active-link"),this.$(".restorefullscreen").removeClass("force-hide").addClass("active-link")},CodeEditorView.prototype.restoreFullscreen=function(e){return this.$("#codeshell-wrapper").codeshell("saveLangCode"),this.fullscreen.unRender(),this.isFullscreened=!1,this.$(".fullscreen").removeClass("force-hide"),this.$(".restorefullscreen").addClass("force-hide"),setTimeout(function(){return $("#codeshell-wrapper").length<1?void 0:$("body").scrollTop($("#codeshell-wrapper").offset().top-50)},100)},CodeEditorView.prototype.confirmUploadFileDialog=function(e){var dialog,that;return this.showConfirmUpload()?this.uploadFileDialog():(that=this,dialog=new HR.util.ShowConfirmationDialog({title:"Attn: Upload file",body:"<p>Uploading a file will replace the current content in your code editor. Would you like to continue?</p> <p class='gray-text' style='font-size: 14px;'> <input id='confirm-upload-checkbox' type='checkbox' class='confirm-upload'> <label style='display: inline-block; font-weight: normal;' for='confirm-upload-checkbox'>skip this alert next time</label> </p>",buttons:[{name:"No","class":"hr_secondary-btn hr-dialog-button",callback:function(dialog){return that.toggleConfirmUpload(dialog.$body().find("input.confirm-upload").is(":checked")),this.setInactive(),dialog.destroy()}},{name:"Yes","class":"hr_primary-btn hr-dialog-button",callback:function(dialog){return that.toggleConfirmUpload(dialog.$body().find("input.confirm-upload").is(":checked")),this.setInactive(),dialog.destroy(),that.uploadFileDialog()}}]}),dialog.render())},CodeEditorView.prototype.toggleConfirmUpload=function(flag){return $.cookie("code_upload_as_file",flag===!1)},CodeEditorView.prototype.showConfirmUpload=function(){return"false"===$.cookie("code_upload_as_file")?!0:!1},CodeEditorView.prototype.uploadFileDialog=function(e){var buttons,dialog,fields,language_options,that;return that=this,language_options={},language_options["auto-detect"]="Auto Detect",language_options["current-language"]="Current Language",_.each(this.model.get("languages"),function(k){return language_options[k]=window.lang_display_mapping[k]}),fields=[{name:"source_file",title:"Source File",type:"file"},{name:"language",title:"Language",type:"select",options:language_options},{name:"challenge_id",value:that.model.get("id"),type:"hidden"},{name:"contest_id",value:that.model.get("contest_id"),type:"hidden"},{name:"current_language",value:$("#codeshell-wrapper").codeshell("getOptions").language,type:"hidden"},{name:"is_file_upload",value:"1",type:"hidden"}],buttons=[{name:"Upload",callback:function(dialog){var $form,btn,formData;return btn=this,$form=dialog.$form(),formData=new FormData($form[0]),btn.unSetFailedMsg(),$.ajax({url:"/rest/upload_respawn",type:"POST",data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){return btn.setInactive(),data.ok?that.$("#codeshell-wrapper").codeshell("getOptions").lang_display_mapping[data.data.language]?HR.appController.loadCodeMirrorMode(data.data.language,function(_this){return function(){return that.$("#codeshell-wrapper").codeshell("forkNewBuffer",{language:data.data.language,code:data.data.source}),dialog.destroy()}}(this)):btn.failed("Language not supported for this challenge"):btn.failed(data.message)}})}}],dialog=new HR.util.ShowFormDialog({title:"Upload Dialog",width:650,enctype:"multipart/form-data",fields:fields,buttons:buttons}),dialog.render()},CodeEditorView.prototype.compileTest=function(e,data){var $btn,_timeoutFn,codeeditor_body_view,compile_test,current_text,dialog,response_view,that;return this.cleanupSubmissionMessage(),0===_.size(data)||(response_view=this.parent.parent.response_view,codeeditor_body_view=this.parent.body,this.deleteMarkersOnSource(),$btn=$(e.currentTarget).find("button.bb-compile"),"disabled"===$btn.attr("btn-disabled")||_.isEmpty($("#codeshell-wrapper").codeshell("getOptions").language))?void 0:($btn.attr("btn-disabled","disabled"),$btn.addClass("disabled"),current_text=$btn.html(),that=this,this.profile.isLoggedIn()?(compile_test=new HR.CompileTestModel({code:data.code,language:data.language}),compile_test.setChallenge(this.model),null!=data.custominput?(compile_test.set("customtestcase",!0),compile_test.set("custominput",data.custominput)):compile_test.set("customtestcase",!1),compile_test.save(),compile_test.bind("change:status",this.enableCompileTest,this),compile_test.bind("change:error_markers",this.addMarkersOnSource,this),response_view.setCompileTest(compile_test),setTimeout(function(){var offset;return offset=$(".output-progress").offset().top,$("html, body").animate({scrollTop:offset},700)},100)):($btn.html("Logging in"),_timeoutFn=function(){return that.profile.isLoggedIn()?($btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.click()):setTimeout(_timeoutFn,100)},dialog=new HR.util.ShowLoginDialog({info_message:"Please signup or login in order to run code",onDestroy:function(){return $btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.html(current_text)},success_callback:function(){return $btn.html(current_text),setTimeout(_timeoutFn,100)},show_signup:!0}),void dialog.render()))},CodeEditorView.prototype.addMarkersOnSource=function(model,error_markers){var editor,error_message,i,line_number,line_offset,marker_node,markers,total_lines;if(error_markers){window.error_marker_widgets||(window.error_marker_widgets=[]),editor=this.$("#codeshell-wrapper").codeshell("getEditor"),line_offset=error_markers.head_code_lines,total_lines=editor.lineCount(),markers=error_markers.markers;for(i in markers)error_message=markers[i].message,line_number=markers[i].line_number-line_offset,total_lines>=line_number&&(marker_node=$("<div class='error-marker'><span class='error-marker-icon'>!</span>"+error_message+"</div>"),window.error_marker_widgets.push(editor.addLineWidget(line_number-1,marker_node[0],{above:!0})));return editor.refresh()}},CodeEditorView.prototype.deleteMarkersOnSource=function(){var editor,i;if(window.error_marker_widgets&&0!==window.error_marker_widgets.length){editor=this.$("#codeshell-wrapper").codeshell("getEditor");for(i in window.error_marker_widgets)editor.removeLineWidget(window.error_marker_widgets[i]);return editor.refresh(),window.error_marker_widgets=[]}},CodeEditorView.prototype.enableCompileTest=function(model,status){var error;return status>0&&(this.$("#codeshell-wrapper").codeshell("enableCompileBtn"),error=model.get("error"))?this.parent.parent.response_view.showError():void 0},CodeEditorView.prototype.submitPopup=function(e,data){var $btn,_timeoutFn,current_text,dialog,error,final_callback,that;return this.cleanupSubmissionMessage(),that=this,$btn=$(e.currentTarget).find("button.bb-submit"),"disabled"!==$btn.attr("btn-disabled")?($btn.attr("btn-disabled","disabled"),$btn.addClass("disabled"),current_text=$btn.html(),this.model.get("submit_disabled")===!0||HR.CONTEST_DISABLED?(error=new HR.util.ShowSubmitDisabledDialog,void error.render()):this.profile.isLoggedIn()?(this.companyId&&this.companyFollowing===!1&&this.profile.follow("Company",this.companyId),$btn.html("Submitting"),this.companySlug&&(data.companySlug=this.companySlug,data.companyName=this.companyName,data.challengeSlug=this.challengeModel.get("slug")),"master"===this.model.get("contest_slug")||"true"===$.cookie("confirm_submit_code")?(final_callback=function(_this){return function(){return $btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.html(current_text)}}(this),this.saveSubmission(data,final_callback)):(dialog=new HR.util.ShowConfirmationDialog({title:"Confirm Submission",body:"Are you sure you want to submit this code? <p class='gray-text' style='font-size: 14px;'> <input id='confirm-submit-checkbox' type='checkbox' class='confirm-submit'> <label style='display: inline-block; font-weight: normal;' for='confirm-submit-checkbox'>Don't ask me again</label> </p>",onDestroy:function(){return $btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.html(current_text)},buttons:[{name:"No, do not submit","class":"hr_secondary-btn hr-dialog-button",callback:function(dialog){return that.saveConfirmSubmitChoice(dialog.$body().find("input.confirm-submit").is(":checked")),this.setInactive(),dialog.destroy()}},{name:"Yes, submit my code","class":"hr_primary-btn hr-dialog-button",callback:function(dialog){var btn;return that.saveConfirmSubmitChoice(dialog.$body().find("input.confirm-submit").is(":checked")),btn=this,final_callback=function(_this){return function(){return dialog.destroy()}}(this),that.saveSubmission(data,final_callback,btn,dialog)}}]}),dialog.render())):($btn.html("Logging in"),_timeoutFn=function(){return that.profile.isLoggedIn()?($btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.click()):setTimeout(_timeoutFn,100)},dialog=new HR.util.ShowLoginDialog({error_message:"Please login in order to submit",onDestroy:function(){return $btn.removeAttr("btn-disabled"),$btn.removeClass("disabled"),$btn.html(current_text)},success_callback:function(){return $btn.html(current_text),setTimeout(_timeoutFn,100)}}),void dialog.render())):void 0},CodeEditorView.prototype.saveConfirmSubmitChoice=function(flag){return $.cookie("confirm_submit_code",flag===!0)},CodeEditorView.prototype.saveSubmission=function(data,final_callback,btn,dialog){var submission,that;return null==btn&&(btn=null),null==dialog&&(dialog=null),that=this,that.submitLock&&that.submitLock===!0?void 0:""!==that.$("#codeshell-wrapper").codeshell("getOptions").language?(btn&&btn.setInactive(),that.submitLock=!0,that.$("#codeshell-wrapper").codeshell("deleteLangCode"),submission=HR.model("submission",{code:data.code,language:data.language,contest_slug:that.model.contest_slug||that.model.get("contest_slug")}),submission.setChallenge(that.model),submission.save(null,{success:function(model,response){var failed_error_message;return _gaq.push(["_trackPageview","/submitcode/"+(that.model.get("contest_slug")||that.model.contest_slug)+"/"+that.model.slug+"/"]),data.companySlug&&hr_metrics.externalService("track","SubmitCompanyChallenge",{company_slug:data.companySlug,company_name:data.companyName,challenge_slug:data.challengeSlug}),HR.QUEUED_SUBMISSIONS||(HR.QUEUED_SUBMISSIONS={}),HR.QUEUED_SUBMISSIONS[model.get("id")]=!0,that.submitLock=!1,response.status?(final_callback(),that.model.isInMaster()&&!that.model.isGameChallenge()?(that.parent.parent.response_view.setSubmissionView(model),model.bind("change:error_markers",that.addMarkersOnSource,that)):(that.parent.unrenderFullScreenView(),model.set("kind",that.model.get("kind"),{silent:!0}),HR.router.navigate(model.pageURL(),!0),$("html body").animate({scrollTop:0},300))):(response.errors?failed_error_message=response.errors[0]:response.message&&(failed_error_message=response.message),btn?(btn.setActive(),btn.setFailedMsg(failed_error_message)):(that.$("#submission-message").html("<p class='error'>"+failed_error_message+"</p>"),final_callback()))},error:function(){return that.submitLock=!1,btn?(btn.setActive(),btn.setFailedMsg("Internal server error occured. Please try again.")):(that.$("#submission-message").html("<p class='error'>Internal server error occured. Please try again.</p>"),final_callback())}})):(btn&&btn.setInactive(),dialog?dialog.showError("Select a language!"):(that.$("#submission-message").html("<p class='error'>Select a language!</p>"),final_callback()))},CodeEditorView.prototype.cleanupSubmissionMessage=function(){return null!=this.hackerCompanyOptInView&&this.hackerCompanyOptInView.autoSelect(),this.$("#submission-message").html("")},CodeEditorView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.CodeEditorView=CodeEditorView})}.call(this),function(){var DesignCodeEditorView,HR,MultipleFileView,ref,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};MultipleFileView=function(superClass){function MultipleFileView(){return MultipleFileView.__super__.constructor.apply(this,arguments)}return extend(MultipleFileView,superClass),MultipleFileView.prototype.confirmUploadFileDialog=function(e){var that;return e.preventDefault(),this.showConfirmUpload()?this.uploadFileDialog():(that=this,HR.util.confirm({title:"Upload Zip File",message:"<p>Uploading a new directory structure will replace the content of your current code Editor. Would you like to continue? </p> <p class='gray-text' style='font-size: 14px;'> <input id='confirm-upload-checkbox' type='checkbox' class='confirm-upload'> <label style='display: inline-block; font-weight: normal;' for='confirm-upload-checkbox'>Skip this alert next time</label> </p>",okButtonText:"Yes",cancelButtonText:"No",okCallback:function(dialog){return that.toggleConfirmUpload(dialog.$body().find("input.confirm-upload").is(":checked")),dialog.destroy(),that.uploadFileDialog()}}))},MultipleFileView.prototype.uploadFileDialog=function(e){var buttons,dialog,fields,that;return that=this,fields=[{name:"source_file",title:"Source File",type:"file"}],buttons=[{name:"Upload",callback:function(dialog){var btn,files,max_allowed_file_size,upload_url;return max_allowed_file_size=26214400,btn=this,btn.unSetFailedMsg(),files=dialog.$form().find(":file")[0].files,0===files.length?void btn.setFailedMsg("Please Select a file to upload"):files[0].size>max_allowed_file_size?void btn.setFailedMsg("File size should be < 25MB."):(upload_url=that.model.url().replace("?","")+"/upload_filetree",$.ajax({url:upload_url,type:"POST",data:{a:1},dataType:"json",iframe:!0,processData:!0,files:dialog.$form().find(":file"),success:function(response){return 200===response.status?($.cookie(that.cookie_str,response.file_identifier,{path:"/",expires:2}),btn.setSuccessMsg(response.message),$.ajax({url:that.model.url(),data:{refresh_folders:!0},type:"GET",success:function(response){return that.model.set(response.model),that.initFileTree(),that.render(),dialog.destroy(),window.HR.appView.dirty=!0}})):btn.setFailedMsg(response.message)}}))}}],dialog=new HR.util.ShowFormDialog({title:"Upload Dialog",width:650,enctype:"multipart/form-data",fields:fields,buttons:buttons}),dialog.render()},MultipleFileView.prototype.toggleConfirmUpload=function(flag){return $.cookie("code_upload_as_zip",flag===!1)},MultipleFileView.prototype.showConfirmUpload=function(){return"false"===$.cookie("code_upload_as_zip")?!0:!1},MultipleFileView.prototype.initFileTree=function(){var performAction,that;return that=this,performAction=function(opts){var copy_file_identifier,file_identifier,node_path;return node_path=null,file_identifier=$.cookie(that.cookie_str)||null,copy_file_identifier=null!=that.submission?that.submission.get("code"):null,node_path=opts.node_path?opts.node_path:$.jstree.reference("#filetree").get_path(opts.node).join("/"),
$.ajax({url:that.model.url().replace("?","")+"/files",type:"POST",data:{node:opts.node,operation:opts.operation,node_path:node_path,file_identifier:null!=file_identifier&&null==copy_file_identifier?file_identifier:void 0,copy_file_identifier:null!=copy_file_identifier?copy_file_identifier:void 0,new_path:opts.new_name?opts.new_name:void 0},success:opts.success,error:opts.error,complete:opts.complete})},this.multipleFiles={data:this.model.get("file_tree"),onSave:function(node,cb){return node.original&&node.original.permission<4?cb():performAction({node:node,operation:"save",success:function(data){return $.cookie(that.cookie_str,data.file_identifier,{path:"/",expires:2}),window.HR.appView.dirty=!0},error:function(){return console.log("error")},complete:function(){return cb()}})},fetch:function(treeObj,cb){return performAction({node:treeObj.node,operation:"fetch",success:function(data){return $.cookie(that.cookie_str,data.file_identifier,{path:"/",expires:2}),treeObj.node.original.fileContents=data.fileContents},error:function(xhr){var res;return res=$.parseJSON(xhr.responseText),treeObj.node.original.fileContents="<i class='icon--single icon-attention'> </i> "+res.error,treeObj.node.original.permission=3},complete:function(){return cb(treeObj)}})},onCreate:function(node,node_parent,create_callback){var inst,node_parent_path,node_path;return inst=$.jstree.reference("#filetree"),node_parent_path=inst.get_path(node_parent),node_path=node_parent_path?node_parent_path.join("/")+("/"+node.text):""+node.text,performAction({node:node,node_path:node_path,operation:"create",success:function(data){return $.cookie(that.cookie_str,data.file_identifier,{path:"/",expires:2}),window.HR.appView.dirty=!0},error:function(xhr){return HR.util.candidatemsg($.parseJSON(xhr.responseText).error,!0,!0,1.5),inst.delete_node(node)},complete:function(){return create_callback()}})},onRename:function(node,node_parent,new_name,rename_callback){var old_name;return old_name=node.text,performAction({node:node,operation:"rename",new_name:new_name,success:function(data){return $.cookie(that.cookie_str,data.file_identifier,{path:"/",expires:2}),window.HR.appView.dirty=!0},error:function(xhr){return HR.util.candidatemsg($.parseJSON(xhr.responseText).error,!0,!0,1.5),node.text=old_name,$.jstree.reference("#filetree").refresh(node)},complete:function(){return rename_callback()}})},onDelete:function(node,node_parent,delete_callback){return performAction({node:node,operation:"delete",success:function(data){return $.cookie(that.cookie_str,data.file_identifier,{path:"/",expires:2}),delete_callback(),window.HR.appView.dirty=!0},error:function(xhr){return HR.util.candidatemsg($.parseJSON(xhr.responseText).error,!0,!0,1.5),delete_callback(!1)}})}}},MultipleFileView}(window.HR.GenericView),DesignCodeEditorView=function(superClass){function DesignCodeEditorView(){return this.hideLoading=bind(this.hideLoading,this),DesignCodeEditorView.__super__.constructor.apply(this,arguments)}return extend(DesignCodeEditorView,superClass),DesignCodeEditorView.prototype.template="design-challenge-response",DesignCodeEditorView.prototype.className="question-design",DesignCodeEditorView.prototype.initialize=function(options){var that;return this.model=options.model,this.parent=options.parent,this.submission_id=options.submission_id,this.contest_id=options.contest_id,this.profile=HR.profile(),this.codeshell=null,this.cookie_str="dc_file_identifier-"+this.contest_id+"-"+this.model.id+"-"+this.profile.id,that=this,this.submission_id?(this.submission=HR.model("submission",{id:this.submission_id,contest_slug:HR.contest().get("slug")}),this.submission.disable_polling=!0,this.submission.fetch({success:function(){return that.autoSaveNamespace=that.model.id+"-"+that.profile.id+"-"+that.submission_id,that.initFileTree(),that.render()}})):(this.autoSaveNamespace=this.model.id+"-"+this.profile.id+"-"+this.submission_id,this.initFileTree()),this},DesignCodeEditorView.prototype.events={"codeshellcompile #editor":"renderAnswer","codeshellsubmit #editor":"saveSubmission","click .upload_file":"confirmUploadFileDialog"},DesignCodeEditorView.prototype.render=function(){return null==this.multipleFiles?this:($(this.el).html(HR.appController.template(this.template,this)({question:this.model})),this.$("#runstatus").load(this.hideLoading),this.show_template=!1,HR.appController.loadCodeMirror(function(_this){return function(){return _this.applyCodeshell()}}(this),function(_this){return function(){return HR.util.alert({message:"There was an error loading the code editor. Please refresh the page."})}}(this)),this)},DesignCodeEditorView.prototype.applyCodeshell=function(){var download_url,file_identifier,opts,selected_node;return download_url=this.model.url().replace("?","")+"/download_filetree",file_identifier=$.cookie(this.cookie_str)||null,null!=file_identifier&&(download_url+="/?file_identifier="+file_identifier),opts={showFileTree:this.multipleFiles,autoSaveNamespace:this.autoSaveNamespace,lang_template:this.getLangDefaults(),showUploadCode:!0,compile_button_text:"Render",submit_button_text:"Submit code & Continue",showSubmit:!0,showCustomInput:!1,dynamicMode:!0,enableIntellisense:!0,adminView:!1,showDownloadCode:download_url,loadmode:function(_this){return function(e,data){return HR.appController.loadCodeMirrorMode(data.lang,function(){return data.callback()})}}(this)},opts.showCompileTest!==!1&&(opts.showCompileTest=!0),this.$("#editor").codeshell(opts),$("#render-help").remove(),this.$("#editor .bb-compile").parent().prepend($("<span id='render-help' class='pull-left icon-help-circled txt-blue psT psB psR' data-toggle='tooltip' data-placement='left' title='Press \"Render\" Button to view the visual output of your code. Press \"Submit code & Continue\" to submit your answer. '></span>").tooltip()),this.$("#editor").codeshell("refresh"),this.multipleFiles&&(this.$("#editor").codeshell("setValue",{language:"text",code:"Please select any file from left to start editing."}),this.$("#editor").codeshell("setOption","readOnly",!0),selected_node=void 0,this.model.get("file_tree").every(function(node_object){return selected_node=node_object,"file"!==node_object.type}),selected_node&&"file"===selected_node.type&&this.$("#filetree").one("loaded.jstree",function(){return $.jstree.reference("#filetree").activate_node(selected_node,"activate_node.jstree")})),setTimeout(function(_this){return function(){return _this.setDefaultText=!0}}(this),3e3)},DesignCodeEditorView.prototype.getLangDefaults=function(){var i,l,languages,len,m;for(m={},languages=this.model.get("languages"),i=0,len=languages.length;len>i;i++)l=languages[i],this.model.get(l+"_template")&&(m[l]=this.model.get(l+"_template"));return m},DesignCodeEditorView.prototype.hideLoading=function(e){return this.$(".bb-compile").length?(this.setStatus("Document prepared successfully.","green"),this.$(".bb-compile").removeClass("disabled"),this.$("#runstatus-load").addClass("hidden"),this.$("#runstatus").removeClass("hidden")):void 0},DesignCodeEditorView.prototype.renderAnswer=function(e,data){var file_identifier,init_url;if(!$(".bb-compile").hasClass("disabled"))return this.$(".bb-compile").addClass("disabled").data("status","sending"),this.$("#runstatus").addClass("hidden"),this.$("#runstatus-load").removeClass("hidden"),this.setStatus("Preparing the document...","black"),init_url=HR.development?window.location.protocol+"//"+window.location.host:window.location.protocol+"//design.hrcdn.net",this.setStatus("Loading document.."),file_identifier=$.cookie(this.cookie_str),this.$("#runstatus").attr("src",init_url+"/rest/contests/"+this.contest_id+"/challenges/"+this.model.id+"/render/"+this.profile.id+"-"+file_identifier+"/"),HR.util.scrollToBottom(1e3)},DesignCodeEditorView.prototype.answer=function(){return this.$("#editor").codeshell("value",!0)},DesignCodeEditorView.prototype.setStatus=function(s,additional_class){return null==additional_class&&(additional_class=""),this.$(".output-area-wrap").removeClass("hidden"),this.$(".status-msg").html(s),""!==additional_class?this.$(".status-msg").addClass(additional_class):void 0},DesignCodeEditorView.prototype.set_answer=function(){return this.$("#editor").codeshell("changeLanguage","html")},DesignCodeEditorView.prototype.saveSubmission=function(data,final_callback,btn,dialog){var submission,that;return null==btn&&(btn=null),null==dialog&&(dialog=null),that=this,submission=HR.model("submission",{contest_slug:that.model.contest_slug||that.model.get("contest_slug"),code:$.cookie(that.cookie_str),language:["html","js","css"]}),submission.setChallenge(that.model),submission.save(null,{success:function(model,response){return $.removeCookie(this.cookie_str,{path:"/"}),HR.router.navigate(model.pageURL(),!0)}})},DesignCodeEditorView}(MultipleFileView),HR=null!=(ref=window.HR)?ref:{},HR.DesignCodeEditorView=DesignCodeEditorView}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerCompanyOptInView,ref;return HackerCompanyOptInView=function(superClass){function HackerCompanyOptInView(){return HackerCompanyOptInView.__super__.constructor.apply(this,arguments)}return extend(HackerCompanyOptInView,superClass),HackerCompanyOptInView.prototype.initialize=function(options){return this.companySlug=options.companySlug,this.companyName=options.companyName,this.challengeModel=options.challengeModel,this.model=options.model,this.model.fetch({data:{contest_slug:this.model.get("contest_slug"),challenge_slug:this.model.get("challenge_slug")},success:function(_this){return function(){return _this.render()}}(this)})},HackerCompanyOptInView.prototype.events={"click .opt-in-radio":"saveState"},HackerCompanyOptInView.prototype.render=function(){return this.model.sync_status?(0===this.$el.find("#opt-in").length&&null===this.model.get("opt_in_for_challenge")&&this.model.get("opt_in")===!1&&this.$el.append("<div id='opt-in' class='banner mlT'>\n  <p style='text-align: right;'>Can "+this.companyName+" contact you for opportunities?&nbsp;\n    <input class=\"opt-in-radio hr-sleek-input\" id=\"custom-radio-id0\"  type='radio' name='opt_in' value='yes'>\n    <label style='display: inline;' for=\"custom-radio-id0\">\n      <span></span>\n      Yes\n    </label>&nbsp;&nbsp;&nbsp;\n    <input class=\"opt-in-radio hr-sleek-input\" id=\"custom-radio-id1\" type='radio' name='opt_in' value='no'>\n    <label style='display: inline;' for=\"custom-radio-id1\">\n      <span></span>\n      No\n    </label>\n  </p>\n</div>"),this):this},HackerCompanyOptInView.prototype.saveState=function(){var checkedVal;if(this.model.sync_status)return checkedVal=this.$('input[name="opt_in"]:checked').val(),"yes"===checkedVal?this.model.set("opt_in",!0):this.model.set("opt_in",!1),this.model.save({},{success:function(_this){return function(){return _this.$("#opt-in").html("<p>Great! You can always change your preferences in settings</p>"),_this.slideUpOptInBoxWithTimeout()}}(this)})},HackerCompanyOptInView.prototype.slideUpOptInBox=function(){return this.$("#opt-in").slideUp()},HackerCompanyOptInView.prototype.slideUpOptInBoxWithTimeout=function(){return setTimeout(function(_this){return function(){return _this.slideUpOptInBox()}}(this),5e3)},HackerCompanyOptInView.prototype.autoSelect=function(){return this.model.set("opt_in",!1),this.model.save({},{success:function(_this){return function(){return _this.$("#opt-in").slideUp()}}(this)})},HackerCompanyOptInView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.HackerCompanyOptInView=HackerCompanyOptInView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var DataSetsUploadView,HR;return DataSetsUploadView=function(superClass){function DataSetsUploadView(){return DataSetsUploadView.__super__.constructor.apply(this,arguments)}return extend(DataSetsUploadView,superClass),DataSetsUploadView.prototype.template="data-sets-upload",DataSetsUploadView.prototype.className="data-sets-upload-view",DataSetsUploadView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.parent=options.parent},DataSetsUploadView.prototype.render=function(){return this.model.sync_status?(this.hacker=HR.profile(),this.hacker.isLoggedIn()?(this.contest||(this.contest=HR.contest()),this.data_set_file_submissions||(this.data_set_file_submissions=new HR.DataSetFileSubmissionsCollection,this.data_set_file_submissions.set_challenge_slug(this.model.get("slug")),this.data_set_file_submissions.set_contest_slug(this.contest.get("slug")),this.data_set_file_submissions.fetch(),this.listenTo(this.data_set_file_submissions,"sync",this.render)),this.data_set_file_submissions.sync_status?($(this.el).html(HR.appController.template(this.template,this)()),this.data_sets||(this.data_sets=this.model.get_data_sets(),this.listenTo(this.data_sets,"change",this.render),this.listenTo(this.data_sets,"reset",this.render)),this.dataSets=$(),this.dataSetListViews&&this.dataSetListViews.length>0&&this.destroyDataSetListViews(),this.dataSetListViews=[],$("div#datasets-upload-wrapper").html(),_.each(this.data_sets.models,function(babe,index){var _view;return _view=new HR.DataSetUploadListView({model:babe,challenge:this.model,data_set_file_submissions:this.data_set_file_submissions,parent:this}),this.dataSets.push(_view.render().el),this.dataSetListViews.push(_view)},this),$(this.el).find("div#datasets-upload-wrapper").append(this.dataSets),this):($(this.el).html("<div class='row'> <div class='span1'>&nbsp</div> <div class='gray light-wrap span8 mlB'>Loading user data</div> </div>"),this)):(this.listenTo(this.hacker,"change",this.render),this.listenTo(this.hacker,"reset",this.render),$(this.el).html("<div class='row'> <div class='span1'>&nbsp</div> <div class='gray light-wrap span8 mlB'>Please login in order to upload your solutions</div> </div>"),this)):this},DataSetsUploadView.prototype.destroyDataSetListViews=function(){return this.dataSetListViews||(this.dataSetListViews=[]),_.each(this.dataSetListViews,function(_view){return _view.destroy()}),this.dataSetListViews=[]},DataSetsUploadView.prototype.destroy=function(){return this.destroyDataSetListViews(),DataSetsUploadView.__super__.destroy.call(this)},DataSetsUploadView}(window.HR.GenericView),HR=window.HR||{},HR.DataSetsUploadView=DataSetsUploadView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var DataSetUploadListView,HR;return DataSetUploadListView=function(superClass){function DataSetUploadListView(){return DataSetUploadListView.__super__.constructor.apply(this,arguments)}return extend(DataSetUploadListView,superClass),DataSetUploadListView.prototype.template="data-set-upload-list",DataSetUploadListView.prototype.className="data-set-upload-list-view",DataSetUploadListView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.challenge=options.challenge,this.listenTo(this.challenge,"change",this.render),this.listenTo(this.challenge,"reset",this.render),this.parent=options.parent,this.data_set_file_submissions=options.data_set_file_submissions},DataSetUploadListView.prototype.render=function(){return this.challenge.sync_status?($(this.el).html(HR.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),challenge:this.challenge,_challenge:this.challenge.toJSON()})),this.data_set_files||(this.data_set_files=this.model.get_data_set_files(),this.listenTo(this.data_set_files,"change",this.render),this.listenTo(this.data_set_files,"reset",this.render)),this.dataSetFiles=$(),this.dataSetFileListViews&&this.dataSetFileListViews.length>0&&this.destroyDataSetFileListViews(),this.dataSetFileListViews=[],$("div#datasets-upload-wrapper").html(),_.each(this.data_set_files.models,function(babe,index){var _view;return _view=new HR.DataSetFileUploadListView({model:babe,dataset:this.model,challenge:this.challenge,data_set_file_submissions:this.data_set_file_submissions,parent:this}),this.dataSetFiles.push(_view.render().el),this.dataSetFileListViews.push(_view)},this),$(this.el).find("div#data-set-files-wrapper").append(this.dataSetFiles),this):this},DataSetUploadListView.prototype.destroyDataSetFileListViews=function(){return this.dataSetFileListViews||(this.dataSetFileListViews=[]),_.each(this.dataSetFileListViews,function(_view){return _view.destroy()}),this.dataSetFileListViews=[]},DataSetUploadListView.prototype.destroy=function(){return this.destroyDataSetFileListViews(),DataSetUploadListView.__super__.destroy.call(this)},DataSetUploadListView}(window.HR.GenericView),HR=window.HR||{},HR.DataSetUploadListView=DataSetUploadListView})}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var DataSetFileUploadListView,HR;return DataSetFileUploadListView=function(superClass){function DataSetFileUploadListView(){return this.poll=bind(this.poll,this),DataSetFileUploadListView.__super__.constructor.apply(this,arguments)}return extend(DataSetFileUploadListView,superClass),DataSetFileUploadListView.prototype.template="data-set-file-upload-list",DataSetFileUploadListView.prototype.className="data-set-file-upload-list-view",DataSetFileUploadListView.prototype.events={"click .js_upload_new":"uploadSubmissionPromptNew","click .js_upload":"uploadSubmissionPrompt","change .js_payload":"uploadSubmission","click .js_delete":"deleteSubmission","click .js_download":"downloadSubmission"},DataSetFileUploadListView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.dataset=options.dataset,this.listenTo(this.dataset,"change",this.render),this.listenTo(this.dataset,"reset",this.render),this.challenge=options.challenge,this.listenTo(this.challenge,"change",this.render),this.listenTo(this.challenge,"reset",this.render),this.parent=options.parent,this.data_set_file_submissions=options.data_set_file_submissions,this.max_score=null},DataSetFileUploadListView.prototype.trunc=function(str){var ext;return ext=str.split(".").slice(-1)[0],str.length>20&&(str=str.substring(0,14)+"..."+ext),str},DataSetFileUploadListView.prototype.render=function(){var dsfs_file_name;return this.challenge.sync_status?(this.data_set_file_submission=this.get_data_set_file_submission(),dsfs_file_name=null,this.data_set_file_submission&&(dsfs_file_name=this.trunc(this.data_set_file_submission.get("file_name"))),$(this.el).html(HR.appController.template(this.template,this)({model:this.model,_model:this.model.toJSON(),dataset:this.dataset,_dataset:this.dataset.toJSON(),challenge:this.challenge,_challenge:this.challenge.toJSON(),data_set_file_submission:this.data_set_file_submission,dsfs_file_name:dsfs_file_name,max_score:this.max_score})),this._tpoll(),this):this},DataSetFileUploadListView.prototype._tpoll=function(){return this.tpoll?void 0:(this.tpoll=_.throttle(this.poll,1e3),this.tpoll())},DataSetFileUploadListView.prototype.poll=function(){var that;return this.data_set_file_submission&&this.data_set_file_submission.get("validation_status")>0&&this.data_set_file_submission.get("validation_status")<3&&!this.polling?this.$(".row").offset()&&this.$(".row").offset().top?(this.polling=!0,that=this,$.ajax({url:this.data_set_file_submission.url(),type:"GET",success:function(data){return that.polling=!1,data&&data.status&&data.model&&data.model.validation_status&&data.model.validation_status>0&&data.model.validation_status<3?setTimeout(function(){return that.update_validation_status(data.model.validation_status,null,null),that.tpoll()},1500):data&&data.status&&data.model&&data.model.validation_status&&data.model.validation_status>=3?that.update_validation_status(data.model.validation_status,data.model.score,data.model.checker_message):data&&data.status&&data.model&&0===data.model.validation_status?that.update_validation_status(data.model.validation_status,data.model.score,data.model.checker_message):void 0},error:function(){return that.polling=!1}})):(that=this,void setTimeout(function(){return that.tpoll()},1500)):void 0},DataSetFileUploadListView.prototype.update_validation_status=function(status,score,checker_message){return this.data_set_file_submission=this.get_data_set_file_submission(),this.data_set_file_submission.get_validation_status(status)?(this.$(".js_validation_status").show(),this.$(".js_validation_status").css("color",this.data_set_file_submission.get_validation_status_color(status)),this.$(".js_validation_status").html(this.data_set_file_submission.get_validation_status(status))):this.$(".js_validation_status").hide(),null!==score?(this.$(".js-score-wrap p").html("<strong>Score:</strong> "+score),this.$(".js-score-wrap").show()):this.$(".js-score-wrap").hide(),null!=this.max_score?null!=score&&score>this.max_score&&(this.max_score=score):this.max_score=score,null!=this.max_score&&this.$(".js-max-score-wrap").html("(Max Score: "+this.max_score+")").show(),null!==checker_message?(this.$(".js_checker_message").html(checker_message.replace(/\n/g,"<br>")),this.$(".js_checker_message_wrap").show()):void 0},DataSetFileUploadListView.prototype.get_data_set_file_submission=function(){var all_data_set_file_submissions,challenge_id,contest,data_set_file_submission,dataset_file_id,dataset_id,max_score;return challenge_id=this.challenge.get("id"),dataset_id=this.dataset.get("id"),dataset_file_id=this.model.get("id"),contest=HR.contest(),all_data_set_file_submissions=_.filter(this.data_set_file_submissions.models,function(data_set_file_submission){return data_set_file_submission.get("challenge_id")===challenge_id&&data_set_file_submission.get("data_set_id")===dataset_id&&data_set_file_submission.get("data_set_file_id")===dataset_file_id}),data_set_file_submission=_.last(all_data_set_file_submissions),max_score=null,all_data_set_file_submissions.length>0&&(max_score=_.max(all_data_set_file_submissions,function(dsfs){return dsfs.get("score")}).get("score")),null!=max_score&&max_score>this.max_score&&(this.max_score=max_score),data_set_file_submission&&(data_set_file_submission.set_challenge_slug(this.challenge.get("slug")),data_set_file_submission.set_contest_slug(contest.get("slug"))),data_set_file_submission},DataSetFileUploadListView.prototype.uploadSubmissionPrompt=function(e){var dialog,that;return that=this,dialog=HR.util.ShowConfirmationDialog({title:this.model.get("label"),body:"This will change your final submission.",buttons:[{name:"Okay","class":"btn-green",callback:function(dialog){return that.uploadSubmissionPromptNew(e),dialog.destroy()}},{name:"Cancel",callback:function(dialog){return dialog.destroy()}}]}),dialog.render()},DataSetFileUploadListView.prototype.uploadSubmissionPromptNew=function(e){return this.$(".js_payload").click()},DataSetFileUploadListView.prototype.uploadSubmission=function(e){var data_set_file_submission,file,files,formData;return files=$(e.currentTarget).get(0).files,0===files.length||this.$(".js_upload").hasClass("disabled")?void 0:(file=files[0],file.size>this.model.get("upload_limit")?alert("Please upload a file smaller than "+this.model.get("human_readable_upload_limit")):_.all(this.model.get("kind").split(),function(k){return!file.name.endsWith("."+k)})||null==this.model.get("kind")?alert("Filetype incorrect. Only the following types are allowed: "+this.model.get("kind")):(this.$(".js_upload").addClass("disabled"),this.$(".js_upload_new").addClass("disabled"),this.$(".js_label").html(this.trunc(file.name)).show(),this.$(".js_validation_status").hide(),this.$(".js_checker_message_wrap").hide(),this.$(".js_uploading").show(),data_set_file_submission=this.get_sample_data_set_file_submission(),formData=new FormData(this.$("form").get(0)),$.ajax({url:data_set_file_submission.url().split("?")[0],type:"POST",data:formData,cache:!1,contentType:!1,processData:!1,success:function(_this){return function(response){var ref;return _this.resetUploadInputBox(),_this.$(".js_uploading").hide(),_this.$(".js_upload_new").removeClass("disabled"),_this.$(".js_upload").removeClass("disabled"),response.status?(_this.$(".js_upload_new").hide(),_this.$(".js_upload").show(),_this.$(".js_download").show(),_this.$(".js_delete").show(),_this.$(".js_label").html(_this.trunc(response.model.file_name)+" &nbsp;&nbsp;&nbsp;("+response.model.human_readable_file_size+")").show(),_this.data_set_file_submissions.add([new HR.DataSetFileSubmissionModel(response.model)],{silent:!0}),null!=(null!=(ref=response.model)?ref.remaining_upload_count:void 0)&&_this.$(".js-upload-count-wrap").html("<em>Uploads Remaining:</em> "+response.model.remaining_upload_count).show(),_this.update_validation_status(response.model.validation_status,response.model.score,response.model.checker_message),_this.tpoll()):(_this.$(".js_label").hide(),alert(response.message||"Error occured! Please try again"))}}(this),error:function(_this){return function(){return _this.resetUploadInputBox(),_this.$(".js_uploading").hide(),_this.$(".js_upload").removeClass("disabled"),_this.$(".js_upload_new").removeClass("disabled"),_this.$(".js_label").hide(),alert("Error occured! Please try again")}}(this)})))},DataSetFileUploadListView.prototype.resetUploadInputBox=function(e){return this.$("form.js_playload_wrap input[type=file]").unbind().remove(),this.$("form.js_playload_wrap").prepend('<input type="file" class="hide js_payload" name="payload">'),this.delegateEvents()},DataSetFileUploadListView.prototype.downloadSubmission=function(e){return window.open(this.get_data_set_file_submission().url().split("?").join("/download?"),"_blank")},DataSetFileUploadListView.prototype.get_sample_data_set_file_submission=function(){var contest,data_set_file_submission,that;return that=this,contest=HR.contest(),data_set_file_submission=new HR.DataSetFileSubmissionModel({data_set_id:this.dataset.get("id"),data_set_file_id:this.model.get("id")}),data_set_file_submission.set_challenge_slug(this.challenge.get("slug")),data_set_file_submission.set_contest_slug(contest.get("slug")),data_set_file_submission},DataSetFileUploadListView.prototype.deleteSubmission=function(e){var challenge,contest,that;if(!$(e.currentTarget).hasClass("disabled"))return $(e.currentTarget).addClass("disabled"),this.$(".js_removing").show(),contest=HR.contest(),challenge=this.challenge,that=this,this.data_set_file_submission=this.get_data_set_file_submission(),this.data_set_file_submission.set_challenge_slug(this.challenge.get("slug")),this.data_set_file_submission.set_contest_slug(contest.get("slug")),this.data_set_file_submission.destroy({success:function(model,response){return that.$(".js_upload_new").show(),that.$(".js_upload").hide(),that.$(".js_removing").hide(),that.$(".js_download").hide(),that.$(".js_delete").hide(),that.$(".js_label").hide(),that.data_set_file_submissions.remove([this.data_set_file_submission],{silent:!0}),that.$(".js_validation_status").hide(),that.$(".js-score-wrap").hide(),that.$(".js_checker_message_wrap").hide(),$(e.currentTarget).removeClass("disabled")},error:function(){return that.$(".js_removing").hide(),$(e.currentTarget).removeClass("disabled"),alert("Error occured! Please try again")}})},DataSetFileUploadListView}(window.HR.GenericView),HR=window.HR||{},HR.DataSetFileUploadListView=DataSetFileUploadListView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionResponseView;return SubmissionResponseView=function(superClass){function SubmissionResponseView(){return SubmissionResponseView.__super__.constructor.apply(this,arguments)}return extend(SubmissionResponseView,superClass),SubmissionResponseView.prototype.template="submission-response",SubmissionResponseView.prototype.className="submission-response-view",SubmissionResponseView.prototype.initialize=function(options){return this.parent=options.parent,this.challenge=options.challenge,this.contest_score=options.contest_score,this.storeOldScores(),this.model.fetch()},SubmissionResponseView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)),this.renderSubViews(),this},SubmissionResponseView.prototype.renderSubViews=function(){var stats_view_class;return this.stats_view||(stats_view_class=HR.SubmissionStatsView,this.challenge.isInMaster()&&!this.challenge.isGameChallenge()&&(stats_view_class=HR.SubmissionStats2View),this.stats_view=new stats_view_class({parent:this,hide_score:!0,enable_theatrics:this.enableTheatrics(),in_challenge_view:!0}),this.stats_view.setModel(this.model),this.add_subview(this.stats_view)),this.assign({"#submission-stats-container":this.stats_view}),this.delegateEvents(),this},SubmissionResponseView.prototype.enableTheatrics=function(){return this.model.isInMaster()?!0:!1},SubmissionResponseView.prototype.storeOldScores=function(){var track;return this.old_challenge_score=this.challenge.get("user_score")||0,track=this.challenge.get("track"),track?this.old_domain_score=track.domain_score||0:this.old_domain_score=0},SubmissionResponseView}(window.HR.GenericView),HR=window.HR||{},HR.SubmissionResponseView=SubmissionResponseView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionStatsView,ref;return SubmissionStatsView=function(superClass){function SubmissionStatsView(){return SubmissionStatsView.__super__.constructor.apply(this,arguments)}return extend(SubmissionStatsView,superClass),SubmissionStatsView.prototype.template="submission-stats",SubmissionStatsView.prototype.className="submission-stats-view",SubmissionStatsView.prototype.events={"click a.js-download-test-case":"promptDialog"},SubmissionStatsView.prototype.initialize=function(options){return $(document).on("click",".change-filter",null,this.updateSelect),this.parent=options.parent,this.hide_score=options.hide_score||!1,this.enable_theatrics=options.enable_theatrics||!1,this.in_challenge_view=options.in_challenge_view||!1,this.time_factor=1,this.revealed_count=0,this.render()},SubmissionStatsView.prototype.setModel=function(model){return this.model&&(this.model.unbind("change"),this.model.unbind("render")),this.model=model,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"render",this.render),this.render()},SubmissionStatsView.prototype.updateSelect=function(e){var src;return e.preventDefault(),src=$(e.target),$("#selected-filter span.select").html(src.text())},SubmissionStatsView.prototype.render=function(){var all_processed,is_admin,live_status_limit,that;return this.model?(0===this.model.get("game_total")&&this.model.set("percent",0),that=this,live_status_limit=this.liveStatusLimit(),all_processed=that.allProcessed(live_status_limit),all_processed&&this.model.markTestCaseRevelationDone(),is_admin=HR.profile().get("is_admin"),HR.requires(["compound/game-views"],function(){var custom_player,data,init;if(custom_player=HR.GameView.prototype.custom_player_count(),$(that.el).html(HR.appController.template(that.template,that)({model:that.model.toJSON(),score_factor:that.parent.challenge.get("factor"),singlePlayer:!!custom_player[that.model.get("codechecker_handle")],hide_score:that.hide_score,checker_processed:that.model.checker_processed(),display_status:that.displayStatus(live_status_limit),live_status:that.model.live_status,
live_status_limit:live_status_limit,enable_theatrics:that.enable_theatrics,all_processed:all_processed,test_case_string:that.freeTestCaseString(live_status_limit),total_test_case_count:that.totalTestCaseCount(),is_admin:is_admin})),"game"===that.model.get("kind")){switch(data=[{id:0,text:"All "+that.model.get("game_played")+" Games Played",slug:"all"},{id:1,text:that.model.get("game_won")+" Games Won",slug:"won"},{id:2,text:that.model.get("game_lost")+" Games Lost",slug:"lost"},{id:3,text:that.model.get("game_mid_range")+" Games Tied",slug:"tied"}],init=0,that.model.get("filter")){case"won":init=1;break;case"lost":init=2;break;case"tied":init=3}return $("#submissions-filter").select2({data:data,width:"off"}),$("#submissions-filter").select2("data",data[init]),$("#submissions-filter").bind("change",function(){return Backbone.history.navigate(HR.appController.get_current_contest_namespace()+"/challenges/"+that.parent.model.get("challenge_slug")+"/submissions/game/"+that.model.get("id")+"/"+$("#submissions-filter").select2("data").slug,!0)})}}),this.checkRemaining(live_status_limit),this.scrollToFocus(),this.delegateEvents(),this):void 0},SubmissionStatsView.prototype.promptDialog=function(e){var _model,testcaseIndex,that,url;return e.preventDefault(),testcaseIndex=$(e.currentTarget).attr("testcase-num"),that=this,_model=this.model.toJSON(),url="/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+testcaseIndex+"/permission",this.enable_theatrics&&(url+="?submission_id="+this.model.get("id")),$.ajax({url:url,type:"GET",success:function(data){return data.permission===!0?that.renderDownloadTestCase(testcaseIndex):data.permission===!1?that.renderPurchaseTestCase(testcaseIndex,data.cost):void 0}})},SubmissionStatsView.prototype.renderPurchaseTestCase=function(index,cost){var _model,data,dialog_options,hacko_cost,that;return null==cost&&(cost=null),that=this,_model=this.model.toJSON(),data={},this.enable_theatrics&&(data.submission_id=this.model.get("id")),hacko_cost=null!==cost?0===cost?"free":cost+" hackos":"5 hackos",dialog_options={title:"Purchase TestCase",body:"<center><p> Do you wish to purchase test case #"+index+" of "+_model.name+" for "+hacko_cost+"?</p> <p class='block-center'><a href='#' class='btn btn-primary js-buy-test-case' data-analytics='Confirm Purchase Testcase'>Yes</a>&nbsp;&nbsp;&nbsp; <a href='#' class='btn btn-primary js-dont-buy' data-analytics='Cancel Purchase Testcase'>No</a></p> <div class='formgroup clearfix m'> <div class='alert error hide'></div> </div>",events:{"click a.js-buy-test-case":function(_this){return function(e){var current_text;return e.preventDefault(),"disabled"!==$(e.currentTarget).attr("disabled")?(current_text=$(e.currentTarget).html(),$(e.currentTarget).html("Buying testcases..."),$(e.currentTarget).attr("disabled","disabled"),that=_this,$.ajax({url:"/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+index+"/purchase",type:"POST",data:data,beforeSend:function(xhr){return xhr.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},success:function(data){return that.dialog.destroy(),that.renderDownloadTestCase(index),HR.profile().set("hacko_amount",data.hacko_amount)},error:function(data){return $(".alert.error").show().html("Insufficient Hackos"),$(e.currentTarget).html(current_text),$(e.currentTarget).removeAttr("disabled")}})):void 0}}(this),"click a.js-dont-buy":function(_this){return function(e){return e.preventDefault(),_this.dialog.destroy()}}(this)}},this.dialog=new HR.util.ShowDialog(dialog_options),this.dialog.render()},SubmissionStatsView.prototype.renderDownloadTestCase=function(index){var _model,dialog_options,that;return that=this,_model=this.model.toJSON(),dialog_options={title:"Download TestCase #"+index,body:"<center><p> Download Test Case #"+index+" of "+_model.name+"</p> <p class='block-center'><a href='#' class='btn btn-primary js-download-test-case' command='testcaseinput' data-analytics='Download Input'>Input</a>&nbsp;&nbsp;&nbsp; <a href='#' class='btn btn-primary js-download-test-case' command='testcaseoutput' data-analytics='Download Output'>Expected Output</a></p> <div class='formgroup clearfix m'> <div class='alert error hide'></div> </div>",events:{"click a.js-download-test-case":function(e){var command;return command=$(e.target).attr("command"),e.preventDefault(),window.open("/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+index+"/"+command,"_blank")}}},this.dialog=new HR.util.ShowDialog(dialog_options),this.dialog.render()},SubmissionStatsView.prototype.contestSlug=function(){return this.model.get("contest_slug")},SubmissionStatsView.prototype.displayStatus=function(live_status_limit){return this.enable_theatrics?this.allProcessed(live_status_limit)?this.model.get("status"):this.model.get("status").startsWith("Running")||this.model.checker_processed()?"Running testcases":this.model.get("status"):this.model.get("status")},SubmissionStatsView.prototype.liveStatusLimit=function(){return this.enable_theatrics?(this.updateRevealedCount(),this.revealed_count):this.model.totalCases()},SubmissionStatsView.prototype.recordFirstResponseTime=function(){return this.first_response_time?void 0:this.first_response_time=Date.now()},SubmissionStatsView.prototype.recordCheckerProcessedTime=function(){return this.checker_processed_time?void 0:this.checker_processed_time=Date.now()},SubmissionStatsView.prototype.checkRemaining=function(live_status_limit){if(live_status_limit<this.model.totalCases()){if(!this.enable_theatrics||this.canStartTestCaseDisplay())return setTimeout(function(_this){return function(){return _this.render()}}(this),1e3*this.time_factor)}else if(this.model.score_processed()&&this.model.checker_processed())return this.model.trigger("animateScores")},SubmissionStatsView.prototype.updateRevealedCount=function(){return _.throttle(function(_this){return function(){var drip_count,new_revelations;return drip_count=_this.model.totalCases()/8,_this.canStartTestCaseDisplay()?(new_revelations=Math.round(Math.random()*drip_count+1),1>new_revelations&&(new_revelations=1),_this.revealed_count+=new_revelations):void 0}}(this),1e3*this.time_factor)()},SubmissionStatsView.prototype.canStartTestCaseDisplay=function(){return 2===this.model.getDisplayVersion()||this.model.checker_processed()},SubmissionStatsView.prototype.allProcessed=function(live_status_limit){return this.model.checker_processed()&&this.model.score_processed()&&live_status_limit>=this.model.totalCases()},SubmissionStatsView.prototype.freeTestCaseString=function(live_status_limit){var test_case_names;return null==this.model.get("free_test_cases")?"":!this.allProcessed(live_status_limit)||this.model.get("free_test_cases").length<1?"":(test_case_names=this.model.get("free_test_cases").map(function(tcno){return"<a href='#' class='js-download-test-case' testcase-num='"+tcno+"'> Test Case #"+tcno+"</a>"}),1===test_case_names.length?test_case_names[0]:test_case_names.slice(0,test_case_names.length-1).join(", ")+" and "+test_case_names[test_case_names.length-1])},SubmissionStatsView.prototype.scrollToFocus=function(){var $stats_container,sample_testcases;return this.in_challenge_view&&(sample_testcases=this.model.get("is_sample_testcase"),typeof sample_testcases==typeof[]&&sample_testcases.length>0&&"Queued"!==this.model.get("status")&&!this.scrolled&&($stats_container=this.$("#submission-stats-content"),$stats_container.length>0))?(this.scrolled=!0,$("html,body").animate({scrollTop:$stats_container.offset().top},"slow")):void 0},SubmissionStatsView.prototype.adjustCss=function(){return _.throttle(function(_this){return function(){var parent_width;return parent_width=$(".right-sidebar .testcases-results").width(),parent_width>750?_this.changeColumnCount(3):parent_width>500?_this.changeColumnCount(2):_this.changeColumnCount(1)}}(this),500)()},SubmissionStatsView.prototype.changeColumnCount=function(count){var $tc_results;return null==count&&(count=3),$tc_results=$(".right-sidebar .testcases-results"),$tc_results.css("-webkit-column-count",""+count),$tc_results.css("-moz-column-count",""+count),$tc_results.css("column-count",""+count)},SubmissionStatsView.prototype.totalTestCaseCount=function(){return this.model.checker_processed()?null!=this.model.get("testcase_status")?this.model.get("testcase_status").length:0:this.model.get("is_sample_testcase").length},SubmissionStatsView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SubmissionStatsView=SubmissionStatsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionStats2View,ref;return SubmissionStats2View=function(superClass){function SubmissionStats2View(){return SubmissionStats2View.__super__.constructor.apply(this,arguments)}return extend(SubmissionStats2View,superClass),SubmissionStats2View.prototype.template="submission-stats2",SubmissionStats2View.prototype.className="submission-stats2-view",SubmissionStats2View.prototype.events={"click a.js-download-test-case":"promptDialog","click .js-try-again":"tryAgainBtn","click .js-next-challenge":"nextChallenge"},SubmissionStats2View.prototype.initialize=function(options){return $(document).on("click",".change-filter",null,this.updateSelect),this.parent=options.parent,this.hide_score=options.hide_score||!1,this.enable_theatrics=options.enable_theatrics||!1,this.in_challenge_view=options.in_challenge_view||!1,this.score_fadeout_state=0,this.time_factor=1,this.revealed_count=0,this.render()},SubmissionStats2View.prototype.setModel=function(model){return this.model&&(this.model.unbind("change"),this.model.unbind("render"),this.model.unbind("pubsub:update")),this.model=model,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"render",this.render),this.listenTo(this.model,"pubsub:update",this.updateSubmissionCallback),this.render()},SubmissionStats2View.prototype.updateSubmissionCallback=function(data,channel){var blank_percent,fill_percent;return data.live_message&&this.$(".status-message").html(data.live_message),data.progress>0&&data.progress_states>0&&(fill_percent=Math.round(data.progress/data.progress_states*100),blank_percent=100-fill_percent,this.$(".fill-bar").css("width",fill_percent+"%"),this.$(".blank-bar").css("width",blank_percent+"%")),data.diff_status&&data.message?_.each(data.diff_status,function(status,index){var $testcase_card,message,testcase_color,testcase_icon,testcase_message;return message=data.message[index],_.isNumber(status)&&_.isString(message)?(testcase_message=message,1===status?(testcase_icon="icon-ok",testcase_color="success"):"Wrong Answer"===message?(testcase_icon="icon-cancel-large",testcase_color="error"):"Terminated due to timeout"===message?(testcase_icon="icon-clock",testcase_color="error"):(testcase_icon="icon-cancel-large",testcase_color="error"),$testcase_card=this.$("#testcase-card-"+index),_.each(["icon-ok","icon-cancel-large","icon-hourglass","icon-clock","error","success"],function(klass){return $testcase_card.find(".testcase-icon").removeClass(klass)}),$testcase_card.find(".testcase-icon").addClass(testcase_color).addClass(testcase_icon),$testcase_card.find(".message-text").html(message)):void 0}):void 0},SubmissionStats2View.prototype.updateSelect=function(e){var src;return e.preventDefault(),src=$(e.target),$("#selected-filter span.select").html(src.text())},SubmissionStats2View.prototype.render=function(){var that;return this.model?(0===this.model.get("game_total")&&this.model.set("percent",0),that=this,HR.requires(["compound/game-views"],function(){var custom_player,data,init;if(custom_player=HR.GameView.prototype.custom_player_count(),$(that.el).html(HR.appController.template(that.template,that)({model:that.model.toJSON(),score_factor:that.parent.challenge.get("factor"),singlePlayer:!!custom_player[that.model.get("codechecker_handle")],hide_score:that.hide_score,checker_processed:that.model.checker_processed(),live_status:that.model.live_status,total_test_case_count:that.totalTestCaseCount(),score_fadeout_state:that.score_fadeout_state})),"game"===that.model.get("kind")){switch(data=[{id:0,text:"All "+that.model.get("game_played")+" Games Played",slug:"all"},{id:1,text:that.model.get("game_won")+" Games Won",slug:"won"},{id:2,text:that.model.get("game_lost")+" Games Lost",slug:"lost"},{id:3,text:that.model.get("game_mid_range")+" Games Tied",slug:"tied"}],init=0,that.model.get("filter")){case"won":init=1;break;case"lost":init=2;break;case"tied":init=3}return $("#submissions-filter").select2({data:data,width:"off"}),$("#submissions-filter").select2("data",data[init]),$("#submissions-filter").bind("change",function(){return Backbone.history.navigate(HR.appController.get_current_contest_namespace()+"/challenges/"+that.parent.model.get("challenge_slug")+"/submissions/game/"+that.model.get("id")+"/"+$("#submissions-filter").select2("data").slug,!0)})}}),setTimeout(function(_this){return function(){return _this.scrollToFocus()}}(this),100),this.fadeOutScore(),this.delegateEvents(),this):void 0},SubmissionStats2View.prototype.promptDialog=function(e){var _model,testcaseIndex,that,url;return e.preventDefault(),testcaseIndex=$(e.currentTarget).attr("testcase-num"),that=this,_model=this.model.toJSON(),url="/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+testcaseIndex+"/permission",this.enable_theatrics&&(url+="?submission_id="+this.model.get("id")),$.ajax({url:url,type:"GET",success:function(data){return data.permission===!0?that.renderDownloadTestCase(testcaseIndex):data.permission===!1?that.renderPurchaseTestCase(testcaseIndex,data.cost):void 0}})},SubmissionStats2View.prototype.renderPurchaseTestCase=function(index,cost){var _model,data,dialog_options,hacko_cost,that;return null==cost&&(cost=null),that=this,_model=this.model.toJSON(),data={},this.enable_theatrics&&(data.submission_id=this.model.get("id")),hacko_cost=null!==cost?0===cost?"free":cost+" hackos":"5 hackos",dialog_options={title:"Purchase TestCase",body:"<center><p> Do you wish to purchase test case #"+index+" of "+_model.name+" for "+hacko_cost+"?</p> <p class='block-center'><a href='#' class='btn btn-primary js-buy-test-case' data-analytics='Confirm Purchase Testcase'>Yes</a>&nbsp;&nbsp;&nbsp; <a href='#' class='btn btn-primary js-dont-buy' data-analytics='Cancel Purchase Testcase'>No</a></p> <div class='formgroup clearfix m'> <div class='alert error hide'></div> </div>",events:{"click a.js-buy-test-case":function(_this){return function(e){var current_text;return e.preventDefault(),"disabled"!==$(e.currentTarget).attr("disabled")?(current_text=$(e.currentTarget).html(),$(e.currentTarget).html("Buying testcases..."),$(e.currentTarget).attr("disabled","disabled"),that=_this,$.ajax({url:"/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+index+"/purchase",type:"POST",data:data,beforeSend:function(xhr){return xhr.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},success:function(data){return that.dialog.destroy(),that.renderDownloadTestCase(index),HR.profile().set("hacko_amount",data.hacko_amount)},error:function(data){return $(".alert.error").show().html("Insufficient Hackos"),$(e.currentTarget).html(current_text),$(e.currentTarget).removeAttr("disabled")}})):void 0}}(this),"click a.js-dont-buy":function(_this){return function(e){return e.preventDefault(),_this.dialog.destroy()}}(this)}},this.dialog=new HR.util.ShowDialog(dialog_options),this.dialog.render()},SubmissionStats2View.prototype.renderDownloadTestCase=function(index){var _model,dialog_options,that;return that=this,_model=this.model.toJSON(),dialog_options={title:"Download TestCase #"+index,body:"<center><p> Download Test Case #"+index+" of "+_model.name+"</p> <p class='block-center'><a href='#' class='btn btn-primary js-download-test-case' command='testcaseinput' data-analytics='Download Input'>Input</a>&nbsp;&nbsp;&nbsp; <a href='#' class='btn btn-primary js-download-test-case' command='testcaseoutput' data-analytics='Download Output'>Expected Output</a></p> <div class='formgroup clearfix m'> <div class='alert error hide'></div> </div>",events:{"click a.js-download-test-case":function(e){var command;return command=$(e.target).attr("command"),e.preventDefault(),window.open("/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+index+"/"+command,"_blank")}}},this.dialog=new HR.util.ShowDialog(dialog_options),this.dialog.render()},SubmissionStats2View.prototype.contestSlug=function(){return this.model.get("contest_slug")},SubmissionStats2View.prototype.scrollToFocus=function(){var $stats_container;return this.in_challenge_view&&!this.scrolled&&($stats_container=this.$("#submission-stats-content"),$stats_container.length>0)?(this.scrolled=!0,$("html,body").animate({scrollTop:$stats_container.offset().top},"slow")):void 0},SubmissionStats2View.prototype.totalTestCaseCount=function(){return this.model.get("is_sample_testcase").length},SubmissionStats2View.prototype.tryAgainBtn=function(){var request_view;return $("body").animate({scrollTop:$(".challenge-request").offset().top-20},"slow"),request_view=_.first(_.filter(HR.appView.contentView._subviews,function(v){return v.__proto__.constructor===HR.ChallengeTemplateView})),request_view.$("#codeshell-wrapper").codeshell("focusEditor")},SubmissionStats2View.prototype.fadeOutScore=function(){return setTimeout(function(_this){return function(){return 0!==_this.$(".js-earned-score").length&&0===_this.score_fadeout_state?(_this.$(".js-earned-score").removeClass("hide").addClass("bounceInUp").addClass("animated"),_this.score_fadeout_state=1,setTimeout(function(){return _this.$(".js-earned-score").hasClass("bounceInUp")?(_this.$(".js-earned-score").removeClass("bounceInUp").addClass("fadeOutDown"),_this.score_fadeout_state=2):void 0},2e3)):void 0}}(this),200)},SubmissionStats2View.prototype.nextChallenge=function(e){var $this;return e.preventDefault(),$this=$(this),$("body").find("#fullscreen-wrapper").length>0?$("#codeshell-wrapper a.restorefullscreen").click():void 0},SubmissionStats2View}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SubmissionStats2View=SubmissionStats2View})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var CodeCompileTestView,HR;return CodeCompileTestView=function(superClass){function CodeCompileTestView(){return CodeCompileTestView.__super__.constructor.apply(this,arguments)}return extend(CodeCompileTestView,superClass),CodeCompileTestView.prototype.template="code-compile-test",CodeCompileTestView.prototype.className="code-compile-test-view",CodeCompileTestView.prototype.initialize=function(options){return this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.parent=options.parent,this.onboarding=options.onboarding,this.bing_type_challenge=options.bing_type_challenge},CodeCompileTestView.prototype.events=function(){return{"click .nav-tabs > li > a":"switchTab"}},CodeCompileTestView.prototype.switchTab=function(e){var target,testcase;return e.preventDefault(),target=$(e.currentTarget),testcase=this.$(".tab-pane[data-test='"+target.data("test")+"']"),this.$(".nav-tabs li").removeClass("active"),target.parent().addClass("active"),testcase.addClass("active"),this.$(".tab-pane").not(testcase).removeClass("active"),!1},CodeCompileTestView.prototype.render=function(){var has_compile_block,has_runtime_block;if(!this.onboarding)return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),bing_type_challenge:this.bing_type_challenge})),this.model.get("status")>0&&(has_compile_block=this.$(".compile-time").length>0,has_runtime_block=this.$(".run-time").length>0,has_compile_block&&!has_runtime_block&&(this.$(".compile-time").addClass("remove-border"),this.$(".compile-time").addClass("full-width"),this.$(".compile-time .rotate").remove()),has_runtime_block&&!has_compile_block&&(this.$(".run-time").addClass("full-width"),this.$(".run-time .rotate").remove())),this},CodeCompileTestView}(window.HR.GenericView),HR=window.HR||{},HR.CodeCompileTestView=CodeCompileTestView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var GameCompileTestView,HR;return GameCompileTestView=function(superClass){function GameCompileTestView(){return GameCompileTestView.__super__.constructor.apply(this,arguments)}return extend(GameCompileTestView,superClass),GameCompileTestView.prototype.template="game-compile-test",GameCompileTestView.prototype.className="game-compile-test-view",GameCompileTestView.prototype.initialize=function(options){return this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.parent=options.parent},GameCompileTestView.prototype.render=function(){var that;return this.game_collection||(this.game_collection=new HR.GameCollection,that=this,HR.requires(["compound/game-views"],function(){var game_container_view;return game_container_view=new HR.GameContainerView({collection:that.game_collection}),game_container_view.setElement(that.el).render(),that.add_subview(game_container_view)})),this.model.get("actors")&&_.each(this.model.get("actors"),function(actor){var game;return this.game_collection.get(actor)?void 0:(game=new HR.GameModel({id:actor,codechecker_handle:this.model.get("codechecker_handle")}),this.game_collection.add(game))},this),_.each(this.model.get("games"),function(_game){var game;return game=this.game_collection.get(_game.id),game.set(_game)},this),this},GameCompileTestView}(window.HR.GenericView),HR=window.HR||{},HR.GameCompileTestView=GameCompileTestView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ClientServerCompileTestView,HR;return ClientServerCompileTestView=function(superClass){function ClientServerCompileTestView(){return ClientServerCompileTestView.__super__.constructor.apply(this,arguments)}return extend(ClientServerCompileTestView,superClass),ClientServerCompileTestView.prototype.template="client-server-compile-test",ClientServerCompileTestView.prototype.className="client-server-compile-test-view",ClientServerCompileTestView.prototype.initialize=function(options){return this.model.bind("change",this.render,this),this.model.bind("reset",this.render,this),this.parent=options.parent},ClientServerCompileTestView.prototype.render=function(){var has_compile_block,has_runtime_block;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),this.model.get("status")>0&&(has_compile_block=this.$(".compile-time").length>0,has_runtime_block=this.$(".run-time").length>0,has_compile_block&&!has_runtime_block&&(this.$(".compile-time").addClass("remove-border"),this.$(".compile-time").addClass("full-width"),this.$(".compile-time .rotate").remove()),has_runtime_block&&!has_compile_block&&(this.$(".run-time").addClass("full-width"),this.$(".run-time .rotate").remove())),this},ClientServerCompileTestView}(window.HR.GenericView),HR=window.HR||{},HR.ClientServerCompileTestView=ClientServerCompileTestView})}.call(this);